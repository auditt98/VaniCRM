(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2448a7b5"],{1031:function(t,e,a){},2474:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("VLoading",{attrs:{loading:t.loading}}),a("div",{staticClass:"px-5 pt-3 m-0 background-main"},[a("div",{staticClass:"row "},[a("div",{staticClass:"col-sm-8"}),a("div",{staticClass:"col-sm-4 d-flex justify-content-end"},[a("router-link",{attrs:{to:"/users"}},[a("VButton",{attrs:{data:t.btnCancel}})],1),a("span",{staticClass:"ml-5",on:{click:function(e){return t.save()}}},[a("VButton",{attrs:{data:t.btnSave}})],1)],1)]),a("div",{staticClass:" mt-3"},[a("input",{staticStyle:{display:"none"},attrs:{id:"avatarId",type:"file"},on:{change:function(e){return t.fileChange(e)}}}),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"basic-edit"},[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-5"},[a("table",{staticClass:"ml-4"},[a("tbody",[a("tr",[a("td",{staticClass:"required"},[t._v("First Name")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.FirstName,expression:"user.FirstName"}],staticClass:"form-control ",class:{"is-invalid":!t.checkValid(t.user.FirstName)},attrs:{type:"text"},domProps:{value:t.user.FirstName},on:{input:function(e){e.target.composing||t.$set(t.user,"FirstName",e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkValid(t.user.FirstName),expression:"!checkValid(user.FirstName)"}],staticClass:"invalid-feedback"},[t._v(" "+t._s(t.requireError)+" ")])])]),a("tr",[a("td",{staticClass:"required"},[t._v("Last Name")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.LastName,expression:"user.LastName"}],staticClass:"form-control ",class:{"is-invalid":!t.checkValid(t.user.LastName)},attrs:{type:"text"},domProps:{value:t.user.LastName},on:{input:function(e){e.target.composing||t.$set(t.user,"LastName",e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkValid(t.user.LastName),expression:"!checkValid(user.LastName)"}],staticClass:"invalid-feedback"},[t._v(" "+t._s(t.requireError)+" ")])])]),a("tr",[a("td",{staticClass:"required"},[t._v("Username")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.Username,expression:"user.Username"}],staticClass:"form-control ",class:{"is-invalid":!t.checkValid(t.user.Username)},attrs:{type:"text"},domProps:{value:t.user.Username},on:{input:function(e){e.target.composing||t.$set(t.user,"Username",e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkValid(t.user.Username),expression:"!checkValid(user.Username)"}],staticClass:"invalid-feedback"},[t._v(" "+t._s(t.requireError)+" ")])])]),a("tr",[a("td",{staticClass:"required"},[t._v("Password")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.Password,expression:"user.Password"}],staticClass:"form-control ",class:{"is-invalid":!t.checkValid(t.user.Password)||t.passwordError},attrs:{type:"text"},domProps:{value:t.user.Password},on:{input:function(e){e.target.composing||t.$set(t.user,"Password",e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkValid(t.user.Password),expression:"!checkValid(user.Password)"}],staticClass:"invalid-feedback"},[t._v(" "+t._s(t.requireError)+" "+t._s(t.passwordError)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.checkValid(t.user.Password),expression:"checkValid(user.Password)"}],staticClass:"invalid-feedback"},[t._v(" "+t._s(t.passwordError)+" ")])])])])])]),a("div",{staticClass:"col-sm-1"}),a("div",{staticClass:"col-sm-5"},[a("table",[a("tbody",[a("tr",[a("td",[t._v("Phone")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.Phone,expression:"user.Phone"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.Phone},on:{input:function(e){e.target.composing||t.$set(t.user,"Phone",e.target.value)}}})])]),a("tr",[a("td",{staticClass:"required"},[t._v("Email")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.Email,expression:"user.Email"}],staticClass:"form-control ",class:{"is-invalid":!t.checkValid(t.user.Email)||t.emailError},attrs:{type:"text"},domProps:{value:t.user.Email},on:{input:function(e){e.target.composing||t.$set(t.user,"Email",e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkValid(t.user.Email),expression:"!checkValid(user.Email)"}],staticClass:"invalid-feedback"},[t._v(" "+t._s(t.requireError)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.checkValid(t.user.Email),expression:"checkValid(user.Email)"}],staticClass:"invalid-feedback"},[t._v(" "+t._s(t.emailError)+" ")])])]),a("tr",[a("td",[t._v("Skype")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.Skype,expression:"user.Skype"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.user.Skype},on:{input:function(e){e.target.composing||t.$set(t.user,"Skype",e.target.value)}}})])])])])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"basic-edit"},[t._m(1),a("div",{staticClass:"row ml-4"},[a("label",{staticClass:"col-sm-1",attrs:{for:"exampleFormControlSelect1"}},[t._v("Group")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.user.GROUP_ID,expression:"user.GROUP_ID"}],staticClass:"form-control py-0 col-sm-3",attrs:{id:"exampleFormControlSelect1"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"GROUP_ID",e.target.multiple?a:a[0])}}},t._l(t.groups,(function(e,r){return a("option",{key:r,domProps:{value:e.id}},[t._v(t._s(e.groupName))])})),0)])])])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Information")])])}],n=a("5530"),c=(a("498a"),a("d3b7"),a("a179")),i=a("7082"),o=a("a18c"),u=a("c43f"),l=a("e118"),d={name:"UserUpdate",components:{VLoading:l["a"],VButton:c["a"]},methods:{save:function(){var t=this;if(console.log(this.user),this.isValidate=!0,this.passwordError="",this.emailError="",this.user.FirstName&&this.user.LastName&&this.user.Username&&this.user.Password&&this.user.Email&&this.user.FirstName.trim()&&this.user.LastName.trim()&&this.user.Username.trim()&&this.user.Password.trim()&&this.user.Email.trim()){if(this.user.Password.length<6||!this.validateEmail())return this.user.Password.length<6&&(this.passwordError="Password phải lớn hơn 6 ký tự."),void(this.validateEmail()||(this.emailError="Email  không đúng định dạng."));var e=Object(n["a"])({},this.user);this.user.id?alert("Lỗi user đã tồn tại"):(this.loading=!0,i["a"].create(e).then((function(t){t?(alert("Thanh cong"),o["a"].push("/users")):alert("That bai")})).catch((function(t){alert(t)})).finally((function(){t.loading=!1})))}},loadGroups:function(){var t=this;this.loading=!0,this.groups=[],u["a"].getAll({}).then((function(e){e&&e.data&&e.data.groups&&(t.groups=e.data.groups)})).catch((function(){alert("LOAD_GROUP: Có lỗi xảy ra")})).finally((function(){t.loading=!1}))},checkValid:function(t){return!this.isValidate||!!t&&!!t.trim()},validateEmail:function(){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(this.user.Email)}},created:function(){this.loadGroups()},data:function(){return{user:{id:null,Username:null,FirstName:null,LastName:null,Email:null,Skype:null,Phone:null,Avatar:null,Password:null,GROUP_ID:1},loading:!1,groups:[],files:new FormData,isValidate:!1,requireError:"Không được bỏ trống.",passwordError:"",emailError:"",btnCancel:{btnClass:"btn-white px-3",icon:"fa-times",text:"Cancel"},btnSave:{btnClass:"btn-red px-4",icon:"fa-floppy-o",text:"Save"}}}},m=d,f=a("2877"),h=Object(f["a"])(m,r,s,!1,null,"4de92613",null);e["default"]=h.exports},"498a":function(t,e,a){"use strict";var r=a("23e7"),s=a("58a8").trim,n=a("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return s(this)}})},7082:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var r=a("5530"),s=(a("d3b7"),a("99af"),a("a078")),n=a("57c3"),c=a("40d9"),i=a("bb4d"),o=a("df6c"),u={getAll:m,create:l,update:d,getById:f,changePassword:h,remove:v,getAllTasks:p,getAllLeads:g,getAllAccounts:w,getAllContacts:b,changeAvatar:_};function l(t){return fetch("".concat(s["d"].apiUrl,"/users"),n["a"].post(t)).then(c["a"])}function d(t,e){return fetch("".concat(s["d"].apiUrl,"/users/").concat(e),n["a"].post(t)).then(c["a"])}function m(t){return fetch("".concat(s["d"].apiUrl,"/users?").concat(Object(s["c"])(t)),n["a"].get()).then(c["a"]).then((function(t){return t}),(function(e){if("retry"==e)return Object(o["a"])("".concat(s["d"].apiUrl,"/users?").concat(Object(s["c"])(t)),n["a"].get(),2).then(c["a"])}))}function f(t){return fetch("".concat(s["d"].apiUrl,"/users/").concat(t),n["a"].get()).then(c["a"]).then((function(t){return t}),(function(e){if("retry"==e)return Object(o["a"])("".concat(s["d"].apiUrl,"/accounts/").concat(t),n["a"].get(),2).then(c["a"])}))}function h(t,e,a){return fetch("".concat(s["d"].apiUrl,"/users/").concat(t,"/change_password"),n["a"].post({oldPassword:e,newPassword:a})).then(c["a"])}function v(t){return fetch("".concat(s["d"].apiUrl,"/users/").concat(t),n["a"].delete()).then(c["a"])}function p(t,e){return fetch("".concat(s["d"].apiUrl,"/users/").concat(t,"/tasks?").concat(Object(s["c"])(e)),n["a"].get()).then(c["a"]).then((function(t){return t}),(function(a){if("retry"==a)return Object(o["a"])("".concat(s["d"].apiUrl,"/users/").concat(t,"/tasks?").concat(Object(s["c"])(e)),n["a"].get(),2).then(c["a"])}))}function g(t,e){return fetch("".concat(s["d"].apiUrl,"/users/").concat(t,"/leads?").concat(Object(s["c"])(e)),n["a"].get()).then(c["a"]).then((function(t){return t}),(function(a){if("retry"==a)return Object(o["a"])("".concat(s["d"].apiUrl,"/users/").concat(t,"/leads?").concat(Object(s["c"])(e)),n["a"].get(),2).then(c["a"])}))}function w(t,e){return fetch("".concat(s["d"].apiUrl,"/users/").concat(t,"/accounts?").concat(Object(s["c"])(e)),n["a"].get()).then(c["a"]).then((function(t){return t}),(function(a){if("retry"==a)return Object(o["a"])("".concat(s["d"].apiUrl,"/users/").concat(t,"/accounts?").concat(Object(s["c"])(e)),n["a"].get(),2).then(c["a"])}))}function b(t,e){return fetch("".concat(s["d"].apiUrl,"/users/").concat(t,"/contacts?").concat(Object(s["c"])(e)),n["a"].get()).then(c["a"]).then((function(t){return t}),(function(a){if("retry"==a)return Object(o["a"])("".concat(s["d"].apiUrl,"/users/").concat(t,"/contacts?").concat(Object(s["c"])(e)),n["a"].get(),2).then(c["a"])}))}function _(t,e){return fetch("".concat(s["d"].apiUrl,"/users/").concat(e,"/change_avatar"),Object(r["a"])(Object(r["a"])({method:"POST"},C()),{},{body:t})).then(c["a"])}function C(){var t=i["a"].currentUserValue||{},e=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(r["a"])({},e)}}},"83ed":function(t,e,a){"use strict";a("8727")},8727:function(t,e,a){},"99af":function(t,e,a){"use strict";var r=a("23e7"),s=a("d039"),n=a("e8b5"),c=a("861d"),i=a("7b0b"),o=a("50c4"),u=a("8418"),l=a("65f0"),d=a("1dde"),m=a("b622"),f=a("2d00"),h=m("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",g=f>=51||!s((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),w=d("concat"),b=function(t){if(!c(t))return!1;var e=t[h];return void 0!==e?!!e:n(t)},_=!g||!w;r({target:"Array",proto:!0,forced:_},{concat:function(t){var e,a,r,s,n,c=i(this),d=l(c,0),m=0;for(e=-1,r=arguments.length;e<r;e++)if(n=-1===e?c:arguments[e],b(n)){if(s=o(n.length),m+s>v)throw TypeError(p);for(a=0;a<s;a++,m++)a in n&&u(d,m,n[a])}else{if(m>=v)throw TypeError(p);u(d,m++,n)}return d.length=m,d}})},a179:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn ",class:t.data.btnClass},[t.data.icon?a("i",{staticClass:"fa mr-2",class:t.data.icon}):t._e(),t._v(" "+t._s(t.data.text)+" ")])},s=[],n={name:"VButton",props:{data:Object}},c=n,i=(a("83ed"),a("2877")),o=Object(i["a"])(c,r,s,!1,null,"45fa8bba",null);e["a"]=o.exports},afa6:function(t,e,a){"use strict";a("1031")},c43f:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("d3b7"),a("99af");var r=a("a078"),s=a("57c3"),n=a("40d9"),c=a("df6c"),i={getAll:l,create:o,update:u,getById:d,getAllPermission:f,remove:m};function o(t){return fetch("".concat(r["d"].apiUrl,"/groups"),s["a"].post(t)).then(n["a"])}function u(t,e){return fetch("".concat(r["d"].apiUrl,"/groups/").concat(e),s["a"].post(t)).then(n["a"])}function l(t){return fetch("".concat(r["d"].apiUrl,"/groups?").concat(Object(r["c"])(t)),s["a"].get()).then(n["a"]).then((function(t){return t}),(function(e){if("retry"==e)return Object(c["a"])("".concat(r["d"].apiUrl,"/groups?").concat(Object(r["c"])(t)),s["a"].get(),2).then(n["a"])}))}function d(t){return fetch("".concat(r["d"].apiUrl,"/groups/").concat(t),s["a"].get()).then(n["a"]).then((function(t){return t}),(function(e){if("retry"==e)return Object(c["a"])("".concat(r["d"].apiUrl,"/groups/").concat(t),s["a"].get(),2).then(n["a"])}))}function m(t){return fetch("".concat(r["d"].apiUrl,"/groups/").concat(t),s["a"].delete()).then(n["a"])}function f(){return fetch("".concat(r["d"].apiUrl,"/groups/all_perms"),s["a"].get()).then(n["a"]).then((function(t){return t}),(function(t){if("retry"==t)return Object(c["a"])("".concat(r["d"].apiUrl,"/groups/all_perms"),s["a"].get(),2).then(n["a"])}))}},c8d2:function(t,e,a){var r=a("d039"),s=a("5899"),n="​᠎";t.exports=function(t){return r((function(){return!!s[t]()||n[t]()!=n||s[t].name!==t}))}},df6c:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7");function r(t,e,a){return fetch(t,e).catch((function(s){if(1===a)throw s;return r(t,e,a-1)}))}},e118:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("div",{staticClass:"loading"},[t._m(0)]):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")])}],n={name:"VLoading",props:{loading:Boolean}},c=n,i=(a("afa6"),a("2877")),o=Object(i["a"])(c,r,s,!1,null,"52be6f57",null);e["a"]=o.exports}}]);
//# sourceMappingURL=chunk-2448a7b5.3ddbbb12.js.map