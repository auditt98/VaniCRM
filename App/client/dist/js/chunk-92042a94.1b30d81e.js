(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92042a94"],{"4d2f":function(t,a,e){"use strict";e("4daa")},"4daa":function(t,a,e){},dfbf:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var n=e("5530"),c=(e("d3b7"),e("99af"),e("a078")),o=e("57c3"),r=e("40d9"),s=e("bb4d"),i={getAll:u,create:l,update:p,getById:d,remove:m,changeAvatar:b,createNote:h,createTag:g,removeNote:C,removeTag:w,loadAllObject:v,loadContacts:f};function u(t){return fetch("".concat(c["d"].apiUrl,"/accounts?").concat(Object(c["c"])(t)),o["a"].get()).then(r["a"])}function l(t){return fetch("".concat(c["d"].apiUrl,"/accounts"),o["a"].post(t)).then(r["a"])}function m(t){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t),o["a"].delete()).then(r["a"])}function d(t){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t),o["a"].get()).then(r["a"])}function f(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/contacts?").concat(Object(c["c"])(t)),o["a"].get()).then(r["a"])}function v(){return fetch("".concat(c["d"].apiUrl,"/accounts/prepare"),o["a"].get()).then(r["a"])}function p(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a),o["a"].post(t)).then(r["a"])}function b(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},$()),{},{body:t})).then(r["a"])}function h(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},$()),{},{body:t})).then(r["a"])}function g(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/tags"),o["a"].post(t)).then(r["a"])}function C(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t,"/notes/").concat(a),o["a"].delete()).then(r["a"])}function w(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t,"/tags/").concat(a),o["a"].delete()).then(r["a"])}function $(){var t=s["a"].currentUserValue||{},a=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},a)}}},fb97:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{},[n("div",{staticClass:"px-5 pt-3 m-0 background-main"},[n("VLoading",{attrs:{loading:t.loading}}),n("div",{staticClass:"row "},[n("div",{staticClass:"col-sm-8"}),n("div",{staticClass:"col-sm-4 d-flex justify-content-end"},[n("router-link",{attrs:{to:{name:"LeadList"}}},[n("VButton",{attrs:{data:t.btnCancel}})],1),n("span",{staticClass:"ml-5",on:{click:function(a){return t.save()}}},[n("VButton",{attrs:{data:t.btnSave}})],1)],1)]),n("div",{staticClass:"mt-3"},[n("input",{staticStyle:{display:"none"},attrs:{id:"avatarId",type:"file"},on:{change:function(a){return t.fileChange(a)}}}),n("div",{staticClass:"row mt-3"},[t.account.id?n("div",{staticClass:"basic-edit"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"user-info-avatar"},[n("div",{staticClass:"user-info-avatar-image"},[t.account.avatar?n("img",{staticClass:"w-100",attrs:{src:t.account.avatar,alt:""}}):n("img",{staticClass:"w-100",attrs:{src:e("8ae4"),alt:""}})]),n("div",{staticClass:"image-select-background"}),t._m(1)])])]):t._e(),n("div",{staticClass:"basic-edit"},[t._m(2),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-5"},[n("table",{staticClass:"ml-4"},[n("tbody",[n("tr",[t._m(3),n("td",{staticStyle:{width:"80%"}},[n("vc-select",{attrs:{id:"Owner1",label:"username",filterable:!1,options:t.owners},on:{search:t.onSearch},model:{value:t.account.owner,callback:function(a){t.$set(t.account,"owner",a)},expression:"account.owner"}})],1)]),n("tr",{class:{"form-group--error":t.$v.account.name.$error}},[n("td",{staticClass:"required"},[t._v("Account Name")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.account.name.$model,expression:"$v.account.name.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.$v.account.name.$model},on:{input:function(a){a.target.composing||t.$set(t.$v.account.name,"$model",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",{class:{"form-group--error":t.$v.account.email.$error}},[n("td",{staticClass:"required"},[t._v("Email")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.account.email.$model,expression:"$v.account.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.$v.account.email.$model},on:{input:function(a){a.target.composing||t.$set(t.$v.account.email,"$model",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),t.$v.account.email.isValidEmail?t._e():n("small",{staticClass:"error text-danger"},[t._v("Email is not correct.")])])]),n("tr",[n("td",[t._v("Phone")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.phone,expression:"account.phone",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.phone},on:{input:function(a){a.target.composing||t.$set(t.account,"phone",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",[n("td",[t._v("Fax")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.fax,expression:"account.fax",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.fax},on:{input:function(a){a.target.composing||t.$set(t.account,"fax",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])])])])]),n("div",{staticClass:"col-sm-1"}),n("div",{staticClass:"col-sm-5"},[n("table",[n("tbody",[n("tr",[n("td",[t._v("Tax Code")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.taxCode,expression:"account.taxCode",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.account.taxCode},on:{input:function(a){a.target.composing||t.$set(t.account,"taxCode",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",[n("td",[t._v("Number Of Employees")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.numberOfEmployees,expression:"account.numberOfEmployees",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.numberOfEmployees},on:{input:function(a){a.target.composing||t.$set(t.account,"numberOfEmployees",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",[n("td",[t._v("Annual Revenue")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.annualRevenue,expression:"account.annualRevenue",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.annualRevenue},on:{input:function(a){a.target.composing||t.$set(t.account,"annualRevenue",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",[n("td",[t._v("Website")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.website,expression:"account.website",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.website},on:{input:function(a){a.target.composing||t.$set(t.account,"website",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",[t._m(4),n("td",{staticStyle:{width:"80%"}},[n("vc-select",{attrs:{id:"Collaborator",label:"username",filterable:!1,options:t.collaborators},on:{search:t.onSearchCo},model:{value:t.account.collaborator,callback:function(a){t.$set(t.account,"collaborator",a)},expression:"account.collaborator"}})],1)])])])])])]),n("div",{staticClass:"basic-edit"},[t._m(5),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("table",{staticClass:"ml-4"},[n("tbody",[n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("Bank Name")]),n("td",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.bankName,expression:"account.bankName",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.bankName},on:{input:function(a){a.target.composing||t.$set(t.account,"bankName",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("Bank Account Name")]),n("td",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.bankAccountName,expression:"account.bankAccountName",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.bankAccountName},on:{input:function(a){a.target.composing||t.$set(t.account,"bankAccountName",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("Bank Account")]),n("td",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.bankAccount,expression:"account.bankAccount",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.bankAccount},on:{input:function(a){a.target.composing||t.$set(t.account,"bankAccount",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])])])])])])])]),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"basic-edit"},[t._m(6),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("table",{staticClass:"ml-4"},[n("tbody",[n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("Country")]),n("td",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.country,expression:"account.country",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.country},on:{input:function(a){a.target.composing||t.$set(t.account,"country",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("City")]),n("td",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.city,expression:"account.city",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.city},on:{input:function(a){a.target.composing||t.$set(t.account,"city",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])]),n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("Address Detail")]),n("td",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account.addressDetail,expression:"account.addressDetail",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.account.addressDetail},on:{input:function(a){a.target.composing||t.$set(t.account,"addressDetail",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})])])])])])])])])])],1)])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"ml-2"},[e("strong",[t._v("User Avatar")])])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("label",{attrs:{for:"avatarId"}},[n("img",{staticClass:"image-select",attrs:{src:e("e429"),alt:""}})]),n("img",{staticClass:"image-done",attrs:{src:e("406d"),alt:""}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"ml-2"},[e("strong",[t._v("Account Information")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",[e("label",{attrs:{for:"Owner1"}},[t._v("Account Owner")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",[e("label",{attrs:{for:"Collaborator"}},[t._v("Account Collaborator")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"ml-2"},[e("strong",[t._v("Bank Information")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"ml-2"},[e("strong",[t._v("Address Information")])])}],o=e("1da1"),r=(e("96cf"),e("d3b7"),e("2b3d"),e("3ca3"),e("ddb0"),e("b0c0"),e("a179")),s=e("e118"),i=e("b5ae"),u=e("7082"),l=e("dfbf"),m={name:"AccountCreate",components:{VLoading:s["a"],VButton:r["a"]},validations:{account:{name:{required:i["required"]},email:{required:i["required"],isValidEmail:function(t){return""===t||this.validateEmail(t)}}}},methods:{save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$v.$touch(),!t.$v.$invalid){a.next=4;break}return alert("loi"),a.abrupt("return");case 4:if(t.loading=!0,t.account.id){a.next=9;break}l["a"].create(t.mapModel()).then((function(a){a&&(alert(a.message),t.$router.push("/accounts"))})).finally((function(){t.loading=!1})),a.next=13;break;case 9:if(!t.files){a.next=12;break}return a.next=12,t.upload();case 12:l["a"].update(t.mapModel(),t.account.id).then((function(t){t&&alert(t.message)})).finally((function(){t.loading=!1}));case 13:case"end":return a.stop()}}),a)})))()},loadAccount:function(){var t=this;this.loading=!0,l["a"].getById(this.account.id).then((function(a){a&&a.data&&(t.account=a.data)})).finally((function(){t.loading=!1}))},fileChange:function(t){this.files=t.target.files[0],this.account.avatar=URL.createObjectURL(this.files)},upload:function(){var t=new FormData;t.append("file",this.files),l["a"].changeAvatar(t,this.account.id).then((function(t){console.log(t)})).catch((function(t){return alert(t)}))},onSearch:function(t){var a=this,e={currentPage:1,pageSize:10};t&&(e["query"]=t),u["a"].getAll(e).then((function(t){t&&(a.owners=t.data.users)}))},onSearchCo:function(t){var a=this,e={currentPage:1,pageSize:10};t&&(e["query"]=t),u["a"].getAll(e).then((function(t){t&&(a.collaborators=t.data.users)}))},validateEmail:function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)},mapModel:function(){return{owner:this.account.owner?this.account.owner.id:null,collaborator:this.account.collaborator?this.account.collaborator.id:null,name:this.account.name,email:this.account.email,phone:this.account.phone,fax:this.account.fax,taxCode:this.account.taxCode,numberOfEmployees:this.account.numberOfEmployees,annualRevenue:this.account.annualRevenue,website:this.account.website,bankName:this.account.bankName,bankAccountName:this.account.bankAccountName,bankAccount:this.account.bankAccount,country:this.account.country,city:this.account.city,addressDetail:this.account.addressDetail}}},created:function(){if(this.$route.path.indexOf("account-update")>-1){if(!this.$route.query.id)return void this.$router.push("/");this.account.id=this.$route.query.id,this.loadAccount()}this.onSearch(null),this.onSearchCo(null)},data:function(){return{account:{owner:null,collaborator:null,name:null,email:null,phone:null,fax:null,taxCode:null,numberOfEmployees:0,annualRevenue:0,website:null,bankName:null,bankAccountName:null,bankAccount:null,country:null,city:null,addressDetail:null},loading:!1,files:null,owners:[],collaborators:[],industry:[],status:[],priority:[],leadSource:[],btnCancel:{btnClass:"btn-white px-3",icon:"fa-times",text:"Cancel"},btnSave:{btnClass:"btn-red px-4",icon:"fa-floppy-o",text:"Save"}}}},d=m,f=(e("4d2f"),e("2877")),v=Object(f["a"])(d,n,c,!1,null,"d6142352",null);a["default"]=v.exports}}]);
//# sourceMappingURL=chunk-92042a94.1b30d81e.js.map