(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-285d66b0"],{3728:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var n=e("5530"),c=(e("d3b7"),e("99af"),e("a078")),r=e("57c3"),o=e("40d9"),s=e("bb4d"),i={getAll:f,create:h,update:v,getById:g,remove:p,changeAvatar:C,createNote:y,createTag:U,changeStage:m,removeNote:_,removeTag:O,loadTasks:l,loadCompetitors:d,createCompetitor:u,loadAllObject:b};function l(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(a,"/tasks?").concat(Object(c["c"])(t)),r["a"].get()).then(o["a"])}function d(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(a,"/competitors?").concat(Object(c["c"])(t)),r["a"].get()).then(o["a"])}function u(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(a,"/competitors"),r["a"].post(t)).then(o["a"])}function f(t){return fetch("".concat(c["d"].apiUrl,"/deals?").concat(Object(c["c"])(t)),r["a"].get()).then(o["a"])}function h(t){return fetch("".concat(c["d"].apiUrl,"/deals"),r["a"].post(t)).then(o["a"])}function p(t){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(t),r["a"].delete()).then(o["a"])}function g(t){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(t),r["a"].get()).then(o["a"])}function m(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(t,"/change_stage/").concat(a),r["a"].get()).then(o["a"])}function b(){return fetch("".concat(c["d"].apiUrl,"/deals/prepare"),r["a"].get()).then(o["a"])}function v(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(a),r["a"].post(t)).then(o["a"])}function C(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(a,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},j()),{},{body:t})).then(o["a"])}function y(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(a,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},j()),{},{body:t})).then(o["a"])}function U(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(a,"/tags"),r["a"].post(t)).then(o["a"])}function _(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(t,"/notes/").concat(a),r["a"].delete()).then(o["a"])}function O(t,a){return fetch("".concat(c["d"].apiUrl,"/deals/").concat(t,"/tags/").concat(a),r["a"].delete()).then(o["a"])}function j(){var t=s["a"].currentUserValue||{},a=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},a)}}},"42fcd":function(t,a,e){"use strict";e("812e")},"5d1f":function(t,a,e){"use strict";e("c639")},"812e":function(t,a,e){},a69d:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"p-4 my-0"},[e("VLoading",{attrs:{loading:t.loading}}),t._m(0),e("div",{staticClass:"testimonial-group"},[2===t.type?e("div",{staticClass:"row flex-row flex-nowrap custom"},t._l(t.items,(function(a){return e("div",{key:a.title,staticClass:"col-1",attrs:{"data-id":a.id}},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"card-header-text row justify-content-between"},[e("p",{staticClass:"col-sm-10",style:"color:"+a.color},[t._v(t._s(a.title))]),t._m(1,!0)]),e("p",{staticClass:"card-header-under-line w-100"})]),e("draggable",t._b({attrs:{list:a.deals,move:t.checkMove,"empty-insert-threshold":60},on:{start:function(t){a.drag=!0},change:function(e){return t.log(e,a)}}},"draggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition",name:a.drag?null:"flip-list"}},t._l(a.deals,(function(t){return e("div",{key:t.title},[e("DashboardCard",{attrs:{data:t}})],1)})),0)],1)],1)})),0):t._e(),1===t.type?e("div",{staticClass:"row flex-row flex-nowrap custom"},[e("div",{staticClass:"col-2",attrs:{"data-id":1}},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"card-header-text row justify-content-between"},[e("p",{staticClass:"col-sm-10",style:"color:#D93915"},[t._v("Leads")]),t._m(2)]),e("p",{staticClass:"card-header-under-line w-100"})]),e("draggable",t._b({attrs:{list:t.leads},on:{start:function(a){t.leadDrag=!0}}},"draggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition",name:t.leadDrag?null:"flip-list"}},t._l(t.leads,(function(t){return e("div",{key:t.title},[e("DashboardCard",{attrs:{data:t}})],1)})),0)],1)],1),e("div",{staticClass:"col-2",attrs:{"data-id":2}},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"card-header-text row justify-content-between"},[e("p",{staticClass:"col-sm-10",style:"color:#D93915"},[t._v("Accounts")]),t._m(3)]),e("p",{staticClass:"card-header-under-line w-100"})]),e("draggable",t._b({attrs:{list:t.accounts,move:t.checkMoveMar},on:{start:function(a){t.accountDrag=!0}}},"draggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition",name:t.accountDrag?null:"flip-list"}},t._l(t.accounts,(function(t){return e("div",{key:t.title},[e("DashboardCard",{attrs:{data:t}})],1)})),0)],1)],1)]):t._e()])],1)])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-search form-group col-md-8 input-group mx-auto mb-5"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button"}},[e("i",{staticClass:"fa fa-search"})]),e("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"col-sm-2 m-auto"},[e("i",{staticClass:"fa fa-plus-circle"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"col-sm-2 m-auto"},[e("i",{staticClass:"fa fa-plus-circle"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"col-sm-2 m-auto"},[e("i",{staticClass:"fa fa-plus-circle"})])}],r=e("1da1"),o=(e("96cf"),e("d3b7"),e("a9e3"),e("d81d"),e("b0c0"),e("b76a")),s=e.n(o),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"card dashboard-card mb-3"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.data.title))]),e("p",{staticClass:"card-text"},[t._v(t._s(t.data.title1))]),e("p",{staticClass:"card-text"},[t._v(t._s(t.data.title2))]),t.data.tags?e("span",{staticClass:"d-flex flex-wrap"},t._l(t.data.tags,(function(a){return e("a",{key:a.tagID,staticClass:"col",attrs:{href:"javascript:void(0)"}},[t._v(t._s(a.tagName))])})),0):t._e()])])])},l=[],d={name:"DashboardCard",props:{data:Object}},u=d,f=(e("5d1f"),e("2877")),h=Object(f["a"])(u,i,l,!1,null,"3a3e3667",null),p=h.exports,g=e("a078"),m=e("57c3"),b=e("40d9"),v={getAllForSale:C};function C(){return fetch("".concat(g["d"].apiUrl,"sale_dashboard"),m["a"].get()).then(b["a"]).then((function(t){return t}))}var y=e("e118"),U=e("3728"),_=e("f4b9"),O=e("dfbf"),j={name:"Dashboard",data:function(){return{loading:!1,type:null,colors:["#109CF1","#A29BFE","#E84393","#F2994A","#F7685B","#8949F2","#1A9A05","#FF002E"],items:[],leads:[],accounts:[],leadDrag:!1,accountDrag:!1}},methods:{log:function(t,a){var e=this;a.drag=!1,t&&t.added&&(this.loading=!0,U["a"].changeStage(Number(t.added.element.id),a.id).then((function(e){e&&"success"===e.status&&(alert("Thành công"),t.added.element.type=a.id)})).finally((function(){e.loading=!1})))},checkMove:function(t){return 7!==t.draggedContext.element.type&&8!==t.draggedContext.element.type||!!(t.relatedContext&&t.relatedContext.element&&(7===t.relatedContext.element.type||t.relatedContext&&8===t.relatedContext.element.type))},checkMoveMar:function(t){return!(!t.relatedContext||!t.relatedContext.element||2!==t.relatedContext.element.type)},loadListDashboardSale:function(){var t=this;this.loading=!0,v.getAllForSale().then((function(a){a&&a.data&&(t.items=a.data.stages.map((function(a,e){return{id:a.stageID,title:a.stageName+" - "+a.probability+"%",color:t.colors[e],drag:!1,deals:a.deals?a.deals.map((function(t){return{id:t.dealID,title:t.dealName,title1:t.accountName,title2:t.ownerUsername,type:a.stageID,tags:t.tags}})):[]}})))})).catch((function(t){alert(t)})).finally((function(){t.loading=!1}))},loadLeads:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.leads=[],t.loading=!0,e={currentPage:1,pageSize:10},a.next=5,_["a"].getAll(e).then((function(a){a&&a.data&&(t.leads=a.data.leads.map((function(t){return{id:t.id,title:t.name,type:1,tags:[],title1:t.phone,title2:t.email}})))})).finally((function(){t.loading=!1}));case 5:case"end":return a.stop()}}),a)})))()},loadAccounts:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.accounts=[],t.loading=!0,e={currentPage:1,pageSize:10},a.next=5,O["a"].getAll(e).then((function(a){a&&a.data&&(t.accounts=a.data.accounts.map((function(t){return{id:t.id,title:t.name,type:2,tags:[],title1:t.phone,title2:t.website}})))})).finally((function(){t.loading=!1}));case 5:case"end":return a.stop()}}),a)})))()}},computed:{dragOptions:function(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},created:function(){window.location.pathname.indexOf("dashboard-marketing")>-1?(this.type=1,this.loadLeads(),this.loadAccounts()):(this.type=2,this.loadListDashboardSale())},components:{VLoading:y["a"],DashboardCard:p,draggable:s.a}},w=j,x=(e("42fcd"),Object(f["a"])(w,n,c,!1,null,"6ded5a6b",null));a["default"]=x.exports},c639:function(t,a,e){},d81d:function(t,a,e){"use strict";var n=e("23e7"),c=e("b727").map,r=e("1dde"),o=r("map");n({target:"Array",proto:!0,forced:!o},{map:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}})},dfbf:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var n=e("5530"),c=(e("d3b7"),e("99af"),e("a078")),r=e("57c3"),o=e("40d9"),s=e("bb4d"),i={getAll:l,create:d,update:g,getById:f,remove:u,changeAvatar:m,createNote:b,createTag:v,removeNote:C,removeTag:y,loadAllObject:p,loadContacts:h};function l(t){return fetch("".concat(c["d"].apiUrl,"/accounts?").concat(Object(c["c"])(t)),r["a"].get()).then(o["a"])}function d(t){return fetch("".concat(c["d"].apiUrl,"/accounts"),r["a"].post(t)).then(o["a"])}function u(t){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t),r["a"].delete()).then(o["a"])}function f(t){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t),r["a"].get()).then(o["a"])}function h(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/contacts?").concat(Object(c["c"])(t)),r["a"].get()).then(o["a"])}function p(){return fetch("".concat(c["d"].apiUrl,"/accounts/prepare"),r["a"].get()).then(o["a"])}function g(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a),r["a"].post(t)).then(o["a"])}function m(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},U()),{},{body:t})).then(o["a"])}function b(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},U()),{},{body:t})).then(o["a"])}function v(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/tags"),r["a"].post(t)).then(o["a"])}function C(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t,"/notes/").concat(a),r["a"].delete()).then(o["a"])}function y(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t,"/tags/").concat(a),r["a"].delete()).then(o["a"])}function U(){var t=s["a"].currentUserValue||{},a=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},a)}}},f4b9:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var n=e("5530"),c=(e("d3b7"),e("99af"),e("a078")),r=e("57c3"),o=e("40d9"),s=e("bb4d"),i={getAll:l,create:d,update:g,getById:h,remove:u,changeAvatar:m,convertToAccount:f,createNote:b,createTag:v,removeNote:C,removeTag:y,loadAllObject:p};function l(t){return fetch("".concat(c["d"].apiUrl,"/leads?").concat(Object(c["c"])(t)),r["a"].get()).then(o["a"])}function d(t){return fetch("".concat(c["d"].apiUrl,"/leads"),r["a"].post(t)).then(o["a"])}function u(t){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(t),r["a"].delete()).then(o["a"])}function f(t){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(t,"/convert"),r["a"].get()).then(o["a"])}function h(t){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(t),r["a"].get()).then(o["a"])}function p(){return fetch("".concat(c["d"].apiUrl,"/leads/prepare"),r["a"].get()).then(o["a"])}function g(t,a){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(a),r["a"].post(t)).then(o["a"])}function m(t,a){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(a,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},U()),{},{body:t})).then(o["a"])}function b(t,a){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(a,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},U()),{},{body:t})).then(o["a"])}function v(t,a){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(a,"/tags"),r["a"].post(t)).then(o["a"])}function C(t,a){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(t,"/notes/").concat(a),r["a"].delete()).then(o["a"])}function y(t,a){return fetch("".concat(c["d"].apiUrl,"/leads/").concat(t,"/tags/").concat(a),r["a"].delete()).then(o["a"])}function U(){var t=s["a"].currentUserValue||{},a=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},a)}}}}]);
//# sourceMappingURL=chunk-285d66b0.4a5031c4.js.map