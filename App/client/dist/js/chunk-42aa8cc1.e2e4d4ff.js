(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42aa8cc1"],{"6c40":function(t,e,a){},9228:function(t,e,a){"use strict";a("6c40")},ad0a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("div",{staticClass:"px-5 pt-3 m-0 background-main"},[s("VLoading",{attrs:{loading:t.loading}}),s("div",{staticClass:"row "},[s("div",{staticClass:"col-sm-8"}),s("div",{staticClass:"col-sm-4 d-flex justify-content-between"},[s("router-link",{attrs:{to:{name:"Users"}}},[s("VButton",{attrs:{data:t.btnCancel}})],1),s("span",{on:{click:function(e){return t.save()}}},[s("VButton",{attrs:{data:t.btnSave}})],1)],1)]),s("div",{staticClass:"mt-3 row"},[s("div",{staticClass:"col-sm-2"},[s("MenuLeft",{attrs:{elements:t.dataMenuLeft},on:{"scroll-to":t.scrollTo}})],1),s("input",{staticStyle:{display:"none"},attrs:{id:"avatarId",type:"file"},on:{change:function(e){return t.fileChange(e)}}}),s("div",{staticClass:"col-sm-10"},[s("div",{staticClass:" mt-3"},[t.user.id?s("div",{staticClass:"basic-edit"},[t._m(0),s("div",{staticClass:"row"},[s("div",{staticClass:"user-info-avatar"},[s("div",{staticClass:"user-info-avatar-image"},[t.user.Avatar?s("img",{staticClass:"w-100",attrs:{src:t.user.Avatar,alt:""}}):s("img",{staticClass:"w-100",attrs:{src:a("8ae4"),alt:""}})]),s("div",{staticClass:"image-select-background"}),t._m(1)])])]):t._e(),s("div",{staticClass:"basic-edit",attrs:{id:"basicInfo"}},[t._m(2),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-5"},[s("table",{staticClass:"ml-4"},[t.user?s("tbody",[s("tr",[s("td",[t._v("First Name")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.FirstName,expression:"user.FirstName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.FirstName},on:{input:function(e){e.target.composing||t.$set(t.user,"FirstName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("tr",[s("td",[t._v("Last Name")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.LastName,expression:"user.LastName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.LastName},on:{input:function(e){e.target.composing||t.$set(t.user,"LastName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("tr",{class:{"form-group--error":t.$v.user.Username.$error}},[s("td",{staticClass:"required"},[t._v("Username")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.user.Username.$model,expression:"$v.user.Username.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.$v.user.Username.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.user.Username,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("tr",[s("td",[t._v("Phone")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.Phone,expression:"user.Phone",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.Phone},on:{input:function(e){e.target.composing||t.$set(t.user,"Phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("tr",[s("td",[t._v("Skype Address")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.Skype,expression:"user.Skype",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.Skype},on:{input:function(e){e.target.composing||t.$set(t.user,"Skype",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])]):t._e()])]),s("div",{staticClass:"col-sm-1"})])])])])])],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("User Avatar")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",{attrs:{for:"avatarId"}},[s("img",{staticClass:"image-select",attrs:{src:a("e429"),alt:""}})]),s("img",{staticClass:"image-done",attrs:{src:a("406d"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Basic Info")])])}],r=a("1da1"),i=(a("96cf"),a("d3b7"),a("2b3d"),a("3ca3"),a("ddb0"),a("a9e3"),a("a179")),o=a("e118"),l=a("b5ae"),c=a("7082"),u=a("eed9"),d={name:"UserUpdate",components:{MenuLeft:u["a"],VLoading:o["a"],VButton:i["a"]},validations:{user:{Username:{required:l["required"]}}},methods:{scrollTo:function(t){this.$scrollTo(t)},save:function(){var t=this;this.$v.$touch(),this.$v.$invalid?alert("loi"):this.user.id&&(this.loading=!0,this.files&&this.upload(),c["a"].update(this.user,this.user.id).then((function(e){e&&(alert(e.message),t.$router.push("/user-detail?id="+t.user.id))})).finally((function(){t.loading=!1})))},loadUser:function(){var t=this;c["a"].getById(this.user.id).then((function(e){e&&e.data&&(t.user.FirstName=e.data.firstName,t.user.LastName=e.data.lastName,t.user.Username=e.data.username,t.user.Phone=e.data.phone,t.user.Skype=e.data.skype,t.user.Avatar=e.data.avatar)}))},fileChange:function(t){this.files=t.target.files[0],this.user.Avatar=URL.createObjectURL(this.files)},upload:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("file",t.files),e.next=4,c["a"].changeAvatar(a,t.user.id).then((function(t){console.log(t)})).catch((function(t){return alert(t)}));case 4:case"end":return e.stop()}}),e)})))()},loadTasks:function(){var t=this;this.loading=!0,this.taskLst=[];var e={currentPage:this.currentPageTask,pageSize:this.pageSizeTask};c["a"].getAllTasks(this.user.id,e).then((function(e){e&&e.data&&(t.taskLst=e.data.tasks,t.totalPageTask=Number(e.data.pageInfo.TotalPages),t.totalItemTask=Number(e.data.pageInfo.TotalItems))})).finally((function(){t.loading=!1}))},loadAccounts:function(){var t=this;this.loading=!0,this.accountLst=[];var e={currentPage:this.currentPageAccount,pageSize:this.pageSizeAccount};c["a"].getAllAccounts(this.user.id,e).then((function(e){e&&e.data&&(t.accountLst=e.data.accounts,t.totalPage=Number(e.data.pageInfo.totalPage))})).finally((function(){t.loading=!1}))},loadContacts:function(){var t=this;this.loading=!0,this.contractLst=[];var e={currentPage:this.currentPageContact,pageSize:this.pageSizeContact};c["a"].getAllContacts(this.user.id,e).then((function(e){e&&e.data&&(t.contractLst=e.data.contacts,t.totalPage=Number(e.data.pageInfo.totalPage))})).finally((function(){t.loading=!1}))},loadLeads:function(){var t=this;this.loading=!0,this.leadOwnLst=[];var e={currentPage:this.currentPageLead,pageSize:this.pageSizeLead};c["a"].getAllLeads(this.user.id,e).then((function(e){e&&e.data&&(t.leadOwnLst=e.data.leads,t.totalPage=Number(e.data.pageInfo.totalPage))})).finally((function(){t.loading=!1}))},onPageSizeChange:function(t,e){"TASK"===e&&(this.pageSizeTask=Number(t),this.loadTasks())},goToPage:function(t,e){"TASK"===e&&(console.log(t),this.currentPageTask=Number(t))}},created:function(){this.$route.query.id?(this.user.id=this.$route.query.id,this.loadUser()):alert("Không có dữ liệu")},data:function(){return{user:{FirstName:null,Avatar:null,LastName:null,Username:null,Phone:null,Skype:null},loading:!1,files:null,currentPageTask:1,pageSizeTask:5,totalItemTask:0,totalPageTask:1,currentPageLead:1,pageSizeLead:5,currentPageAccount:1,pageSizeAccount:5,currentPageContact:1,pageSizeContact:5,btnCancel:{btnClass:"btn-white px-3",icon:"fa-times",text:"Cancel"},btnSave:{btnClass:"btn-red px-4",icon:"fa-floppy-o",text:"Save"},tags:[],dataMenuLeft:[{id:"#basicInfo",text:"Basic Info"},{id:"#tasks",text:"Tasks"},{id:"#leadOwn",text:"Lead Own"},{id:"#allAccounts",text:"All Accounts"},{id:"#allContacts",text:"All Contacts"}],leadOwnColumns:["Name","Email","Phone","Website","Skype"],columns:["Title","Type","Status","Start Date","End Date","Priority","Action"],taskLst:[],accountColumns:["Account Name","Email","Phone","Website","Tax Code","Is Owner","Is Collaborator"],accountLst:[],contractColumns:["Contract Name","Email","Phone","Mobile","Skype","Is Owner","Is Collaborator"],contractLst:[],leadOwnLst:[]}}},m=d,f=a("2877"),g=Object(f["a"])(m,s,n,!1,null,"9187cc90",null);e["default"]=g.exports},eed9:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"menu-left"},[t.elements?a("ul",{staticClass:"list-group"},[a("li",{staticClass:"list-group-item font-weight-bold"},[t._v("Jump to")]),t._l(t.elements,(function(e,s){return a("li",{key:s,staticClass:"list-group-item",on:{click:function(a){return t.scrollToElement(e.id)}}},[t._v(t._s(e.text))])}))],2):t._e()])])},n=[],r={name:"MenuLeft",props:{elements:Array},methods:{scrollToElement:function(t){this.$emit("scroll-to",t)}}},i=r,o=(a("9228"),a("2877")),l=Object(o["a"])(i,s,n,!1,null,"8bd6710c",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-42aa8cc1.e2e4d4ff.js.map