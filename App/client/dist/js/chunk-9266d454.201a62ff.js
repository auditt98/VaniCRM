(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9266d454"],{"1a7b":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("5530"),r=(a("d3b7"),a("99af"),a("a078")),c=a("57c3"),l=a("40d9"),o=a("bb4d"),s={getAll:i,create:u,update:f,getById:p,remove:d,changeAvatar:h,createNote:v,createTag:g,removeNote:b,removeTag:y,loadAllObject:m};function i(t){return fetch("".concat(r["d"].apiUrl,"/calls?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function u(t){return fetch("".concat(r["d"].apiUrl,"/calls"),c["a"].post(t)).then(l["a"])}function d(t){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(t),c["a"].delete()).then(l["a"])}function p(t){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(t),c["a"].get()).then(l["a"])}function m(){return fetch("".concat(r["d"].apiUrl,"/calls/prepare"),c["a"].get()).then(l["a"])}function f(t,e){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(e),c["a"].post(t)).then(l["a"])}function h(t,e){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(e,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},_()),{},{body:t})).then(l["a"])}function v(t,e){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(e,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},_()),{},{body:t})).then(l["a"])}function g(t,e){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(e,"/tags"),c["a"].post(t)).then(l["a"])}function b(t,e){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(t,"/notes/").concat(e),c["a"].delete()).then(l["a"])}function y(t,e){return fetch("".concat(r["d"].apiUrl,"/calls/").concat(t,"/tags/").concat(e),c["a"].delete()).then(l["a"])}function _(){var t=o["a"].currentUserValue||{},e=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},e)}}},3728:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("5530"),r=(a("d3b7"),a("99af"),a("a078")),c=a("57c3"),l=a("40d9"),o=a("bb4d"),s={getAll:p,create:m,update:b,getById:h,remove:f,changeAvatar:y,createNote:_,createTag:C,changeStage:v,removeNote:w,removeTag:P,loadTasks:i,loadCompetitors:u,createCompetitor:d,loadAllObject:g};function i(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(e,"/tasks?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function u(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(e,"/competitors?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function d(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(e,"/competitors"),c["a"].post(t)).then(l["a"])}function p(t){return fetch("".concat(r["d"].apiUrl,"/deals?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function m(t){return fetch("".concat(r["d"].apiUrl,"/deals"),c["a"].post(t)).then(l["a"])}function f(t){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(t),c["a"].delete()).then(l["a"])}function h(t){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(t),c["a"].get()).then(l["a"])}function v(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(t,"/change_stage/").concat(e),c["a"].get()).then(l["a"])}function g(){return fetch("".concat(r["d"].apiUrl,"/deals/prepare"),c["a"].get()).then(l["a"])}function b(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(e),c["a"].post(t)).then(l["a"])}function y(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(e,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},O()),{},{body:t})).then(l["a"])}function _(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(e,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},O()),{},{body:t})).then(l["a"])}function C(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(e,"/tags"),c["a"].post(t)).then(l["a"])}function w(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(t,"/notes/").concat(e),c["a"].delete()).then(l["a"])}function P(t,e){return fetch("".concat(r["d"].apiUrl,"/deals/").concat(t,"/tags/").concat(e),c["a"].delete()).then(l["a"])}function O(){var t=o["a"].currentUserValue||{},e=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},e)}}},"498a":function(t,e,a){"use strict";var n=a("23e7"),r=a("58a8").trim,c=a("c8d2");n({target:"String",proto:!0,forced:c("trim")},{trim:function(){return r(this)}})},"5d73":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("5530"),r=(a("d3b7"),a("99af"),a("a078")),c=a("57c3"),l=a("40d9"),o=a("bb4d"),s={getAll:d,create:p,update:v,getById:f,remove:m,changeAvatar:g,createNote:b,createTag:y,removeNote:_,removeTag:C,loadContacts:i,loadLeads:u,loadAllObject:h};function i(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(e,"/contacts?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function u(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(e,"/leads?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function d(t){return fetch("".concat(r["d"].apiUrl,"/campaigns?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function p(t){return fetch("".concat(r["d"].apiUrl,"/campaigns"),c["a"].post(t)).then(l["a"])}function m(t){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(t),c["a"].delete()).then(l["a"])}function f(t){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(t),c["a"].get()).then(l["a"])}function h(){return fetch("".concat(r["d"].apiUrl,"/campaigns/prepare"),c["a"].get()).then(l["a"])}function v(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(e),c["a"].post(t)).then(l["a"])}function g(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(e,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},w()),{},{body:t})).then(l["a"])}function b(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(e,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},w()),{},{body:t})).then(l["a"])}function y(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(e,"/tags"),c["a"].post(t)).then(l["a"])}function _(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(t,"/notes/").concat(e),c["a"].delete()).then(l["a"])}function C(t,e){return fetch("".concat(r["d"].apiUrl,"/campaigns/").concat(t,"/tags/").concat(e),c["a"].delete()).then(l["a"])}function w(){var t=o["a"].currentUserValue||{},e=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},e)}}},"8a60":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"px-5 pt-3 m-0 background-main"},[a("VLoading",{attrs:{loading:t.loading}}),a("div",{staticClass:"row "},[a("div",{staticClass:"col-sm-8"}),a("div",{staticClass:"col-sm-4 d-flex justify-content-end"},[a("router-link",{attrs:{to:{name:"/"}}},[a("VButton",{attrs:{data:t.btnCancel}})],1),a("span",{staticClass:"ml-5",on:{click:function(e){return t.save()}}},[a("VButton",{attrs:{data:t.btnSave}})],1)],1)]),a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"basic-edit"},[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-5"},[a("table",{staticClass:"ml-4"},[a("tbody",[a("tr",[a("td",[t._v("Call Owner")]),a("td",{staticStyle:{width:"80%"}},[a("vc-select",{attrs:{id:"cOwner",label:"username",filterable:!1,options:t.owners},on:{search:t.onSearch},scopedSlots:t._u([{key:"option",fn:function(e){return[a("div",{staticClass:"d-center"},[t._v(" "+t._s(e.username+" - "+e.firstName)+" ")])]}},{key:"selected-option",fn:function(e){return[a("div",{staticClass:"selected d-center"},[t._v(" "+t._s(e.username+" - "+e.firstName)+" ")])]}}]),model:{value:t.call.owner,callback:function(e){t.$set(t.call,"owner",e)},expression:"call.owner"}},[a("template",{slot:"no-options"},[t._v(" Type for searching... ")])],2)],1)]),a("tr",{class:{"form-group--error":t.$v.call.title.$error}},[a("td",{staticClass:"required"},[t._v("Title")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.call.title,expression:"call.title"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.call.title},on:{input:function(e){e.target.composing||t.$set(t.call,"title",e.target.value)}}})])]),a("tr",[t._m(1),a("td",{staticStyle:{width:"80%"}},[a("vc-select",{class:{"select-disabled":t.call.lead},attrs:{id:"Source1",label:"contactName",filterable:!1,options:t.contacts},on:{search:t.onSearchContact},model:{value:t.call.contact,callback:function(e){t.$set(t.call,"contact",e)},expression:"call.contact"}})],1)]),a("tr",[t._m(2),a("td",{staticStyle:{width:"80%"}},[a("vc-select",{class:{"select-disabled":t.call.contact},attrs:{id:"Lead",label:"name",filterable:!1,options:t.leads},on:{search:t.onSearchLead},model:{value:t.call.lead,callback:function(e){t.$set(t.call,"lead",e)},expression:"call.lead"}})],1)]),a("tr",[t._m(3),a("td",[t.purposes?a("select",{directives:[{name:"model",rawName:"v-model",value:t.call.purpose,expression:"call.purpose"}],staticClass:"form-control py-0 w-100",attrs:{id:"Purpose"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.call,"purpose",e.target.multiple?a:a[0])}}},t._l(t.purposes,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]),a("tr",[t._m(4),a("td",[t.results?a("select",{directives:[{name:"model",rawName:"v-model",value:t.call.result,expression:"call.result"}],staticClass:"form-control py-0 w-100",attrs:{id:"Result"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.call,"result",e.target.multiple?a:a[0])}}},t._l(t.results,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]),a("tr",[a("td",{staticClass:"w-25"},[t._v("Call Duration")]),a("td",{staticClass:"w-75"},[a("p",{staticClass:"row"},[a("span",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.duration.h,expression:"duration.h"}],staticClass:"w-50",attrs:{type:"number"},domProps:{value:t.duration.h},on:{input:function(e){e.target.composing||t.$set(t.duration,"h",e.target.value)}}}),a("span",{staticClass:"ml-2 w-25"},[t._v("h")])]),a("span",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.duration.m,expression:"duration.m"}],staticClass:"w-50",attrs:{type:"number"},domProps:{value:t.duration.m},on:{input:function(e){e.target.composing||t.$set(t.duration,"m",e.target.value)}}}),a("span",{staticClass:"ml-2 w-25"},[t._v("m")])]),a("span",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.duration.s,expression:"duration.s"}],staticClass:"w-50",attrs:{type:"number"},domProps:{value:t.duration.s},on:{input:function(e){e.target.composing||t.$set(t.duration,"s",e.target.value)}}}),a("span",{staticClass:"ml-2 w-25"},[t._v("s")])])])])]),a("tr",[a("td",[t._v("Start Time")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.call.startTime,expression:"call.startTime"}],attrs:{type:"datetime-local"},domProps:{value:t.call.startTime},on:{input:function(e){e.target.composing||t.$set(t.call,"startTime",e.target.value)}}})])]),a("tr",[t._m(5),a("td",[t.priorities?a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.call.priority,expression:"call.priority",modifiers:{trim:!0}}],staticClass:"form-control py-0 w-100",attrs:{id:"Priority"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.call,"priority",e.target.multiple?a:a[0])}}},t._l(t.priorities,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])])])])]),a("div",{staticClass:"col-sm-1"}),a("div",{staticClass:"col-sm-5"},[a("table",[a("tbody",[a("tr",[t._m(6),a("td",[t.statuses?a("select",{directives:[{name:"model",rawName:"v-model",value:t.call.status,expression:"call.status"}],staticClass:"form-control py-0 w-100",attrs:{id:"Status1"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.call,"status",e.target.multiple?a:a[0])}}},t._l(t.statuses,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]),a("tr",[t._m(7),a("td",[t.types?a("select",{directives:[{name:"model",rawName:"v-model",value:t.call.type,expression:"call.type"}],staticClass:"form-control py-0 w-100",attrs:{id:"Type1"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.call,"type",e.target.multiple?a:a[0])}}},t._l(t.types,(function(e,n){return a("option",{key:n,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]),a("tr",[t._m(8),a("td",{staticStyle:{width:"80%"}},[a("vc-select",{attrs:{id:"Deal",label:"name",filterable:!1,options:t.deals},on:{search:t.onSearchDeal},model:{value:t.call.relatedDeal,callback:function(e){t.$set(t.call,"relatedDeal",e)},expression:"call.relatedDeal"}})],1)]),a("tr",[t._m(9),a("td",{staticStyle:{width:"80%"}},[a("vc-select",{attrs:{id:"Account",label:"name",filterable:!1,options:t.accounts},on:{search:t.onSearchAccount},model:{value:t.call.relatedAccount,callback:function(e){t.$set(t.call,"relatedAccount",e)},expression:"call.relatedAccount"}})],1)]),a("tr",[t._m(10),a("td",{staticStyle:{width:"80%"}},[a("vc-select",{attrs:{id:"Campaign",label:"name",filterable:!1,options:t.campaigns},on:{search:t.onSearchCampaign},model:{value:t.call.relatedCampaign,callback:function(e){t.$set(t.call,"relatedCampaign",e)},expression:"call.relatedCampaign"}})],1)]),a("tr",[a("td",[t._v("Remider")]),a("td",[a("VSwitchButton",{model:{value:t.call.isReminder,callback:function(e){t.$set(t.call,"isReminder",e)},expression:"call.isReminder"}})],1)]),t.frequencies?a("tr",[t._m(11),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.rruleProp.repeatType,expression:"rruleProp.repeatType"}],staticClass:"form-control py-0 w-100",attrs:{id:"Source"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.rruleProp,"repeatType",e.target.multiple?a:a[0])}}},t._l(t.frequencies,(function(e,n){return a("option",{key:n,domProps:{value:n}},[t._v(t._s(e))])})),0)])]):t._e(),a("tr",[a("td",[t._v("End")]),a("td",[a("p",{staticClass:"row"},[a("span",{staticClass:"col-2"},[a("label",{staticClass:"checkbox-custom"},[t._v("Never "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rruleProp.rruleType,expression:"rruleProp.rruleType"}],attrs:{type:"radio",name:"rrule"},domProps:{value:1,checked:t._q(t.rruleProp.rruleType,1)},on:{change:function(e){return t.$set(t.rruleProp,"rruleType",1)}}}),a("span",{staticClass:"checkmark"})])])]),a("p",{staticClass:"row"},[a("span",{staticClass:"col-2"},[a("label",{staticClass:"checkbox-custom"},[t._v("After "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rruleProp.rruleType,expression:"rruleProp.rruleType"}],attrs:{type:"radio",name:"rrule"},domProps:{value:2,checked:t._q(t.rruleProp.rruleType,2)},on:{change:function(e){return t.$set(t.rruleProp,"rruleType",2)}}}),a("span",{staticClass:"checkmark"})])]),a("span",{staticClass:"col-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rruleProp.times,expression:"rruleProp.times"}],staticClass:"col",attrs:{type:"number"},domProps:{value:t.rruleProp.times},on:{input:function(e){e.target.composing||t.$set(t.rruleProp,"times",e.target.value)}}})]),a("span",{staticClass:"col-3"},[t._v("Times")])]),a("p",{staticClass:"row"},[a("span",{staticClass:"col-2"},[a("label",{staticClass:"checkbox-custom"},[t._v("On "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rruleProp.rruleType,expression:"rruleProp.rruleType"}],attrs:{type:"radio",name:"rrule",checked:""},domProps:{value:3,checked:t._q(t.rruleProp.rruleType,3)},on:{change:function(e){return t.$set(t.rruleProp,"rruleType",3)}}}),a("span",{staticClass:"checkmark"})])]),a("span",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rruleProp.util,expression:"rruleProp.util"}],attrs:{type:"date"},domProps:{value:t.rruleProp.util},on:{input:function(e){e.target.composing||t.$set(t.rruleProp,"util",e.target.value)}}})])])])])])])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"basic-edit"},[t._m(12),a("div",{staticClass:"row ml-2"},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.call.description,expression:"call.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"",id:"",cols:"25",rows:"5"},domProps:{value:t.call.description},on:{input:function(e){e.target.composing||t.$set(t.call,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Call Information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Source1"}},[t._v("Contact")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Lead"}},[t._v("Lead")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Purpose"}},[t._v("Call Purpose")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Result"}},[t._v("Call Result")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Priority"}},[t._v("Priority")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Status1"}},[t._v("Status")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Type1"}},[t._v("Call Type")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Deal"}},[t._v("Related Deal")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Account"}},[t._v("Related Account")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Campaign"}},[t._v("Related Campaign")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Source"}},[t._v("Repeat Type")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Description")])])}],c=a("1da1"),l=(a("96cf"),a("d3b7"),a("1276"),a("ac1f"),a("a9e3"),a("b0c0"),a("25f0"),a("a4d3"),a("e01a"),a("498a"),a("a179")),o=a("13fc"),s=a("1a7b"),i=a("f4b9"),u=a("3728"),d=a("dfbf"),p=a("5d73"),m=a("1e64"),f=a("a078"),h=a("e118"),v=a("7082"),g=a("55b4"),b=a("b5ae"),y={name:"CallCreateEdit",components:{VLoading:h["a"],VSwitchButton:o["a"],VButton:l["a"]},validations:{call:{title:{required:b["required"]}}},methods:{loadCall:function(){var t=this;this.loading=!0,s["a"].getById(this.call.id).then((function(e){if(e&&e.data){if(t.call=e.data,e.data.duration){var a=new Date(1e3*e.data.duration).toISOString().substr(11,8).split(":");t.duration.h=Number(a[0]),t.duration.m=Number(a[1]),t.duration.s=Number(a[2])}t.call.isReminder=e.data.isRepeat,t.call.contact=e.data.contact?{id:e.data.contact.id,contactName:e.data.contact.name}:null,t.call.priority=Object(f["f"])(e.data.priorities,"selected","id"),t.call.result=Object(f["f"])(e.data.results,"selected","id"),t.call.status=Object(f["f"])(e.data.statuses,"selected","id"),t.call.type=Object(f["f"])(e.data.types,"selected","id"),t.call.purpose=Object(f["f"])(e.data.purposes,"selected","id"),t.mapRRule(t.call.rrule)}else alert("Không có dữ liệu"),t.$router.push("/")})).finally((function(){t.loading=!1}))},save:function(){var t=this;if(this.$v.$touch(),this.$v.$invalid)alert("loi");else if(this.call.contact&&this.call.lead)alert("Loi");else{this.loading=!0;var e={freq:Number(this.rruleProp.repeatType),interval:1};2===this.rruleProp.rruleType&&(e["count"]=this.rruleProp.times),3===this.rruleProp.rruleType&&(e["until"]=Object(f["i"])(this.rruleProp.util));var a=new g["a"](e);this.call.rrule=a.toString(),this.call.duration=Object(f["g"])(this.duration),this.call.id?s["a"].update(this.mapModel(),this.call.id).then((function(t){alert(t.message)})).finally((function(){t.loading=!1})):s["a"].create(this.mapModel()).then((function(e){alert(e.message),t.contactId&&t.$router.push("/contact-detail?id="+t.contactId),t.dealId&&t.$router.push("/deal-detail?id="+t.dealId)})).finally((function(){t.loading=!1}))}},mapModel:function(){return{owner:this.call.owner?this.call.owner.id:null,contact:this.call.contact?this.call.contact.id:null,lead:this.call.lead?this.call.lead.id:null,purpose:this.call.purpose,status:this.call.status,result:this.call.result,type:this.call.type,priority:this.call.priority,relatedDeal:this.call.relatedDeal?this.call.relatedDeal.id:null,relatedAccount:this.call.relatedAccount?this.call.relatedAccount.id:null,relatedCampaign:this.call.relatedCampaign?this.call.relatedCampaign.id:null,title:this.call.title,duration:this.call.duration,startTime:this.call.startTime,isReminder:this.call.isReminder,rrule:this.call.rrule,description:this.call.description}},loadSelectList:function(){var t=this;this.loading=!0,s["a"].loadAllObject().then((function(e){e&&e.data&&"success"===e.status&&(t.purposes=e.data.purposes,t.types=e.data.types,t.statuses=e.data.statuses,t.results=e.data.results,t.priorities=e.data.priorities)})).finally((function(){t.loading=!1}))},onSearch:function(t){var e=this,a={currentPage:1,pageSize:10};t&&(a["query"]=t),v["a"].getAll(a).then((function(t){t&&(e.owners=t.data.users)}))},onSearchContact:function(t){var e=this,a={currentPage:1,pageSize:10};t&&t.trim()&&(a["query"]=t),m["a"].getAll(a).then((function(t){t&&t.data&&(e.contacts=t.data.contacts)}))},onSearchLead:function(t){var e=this,a={currentPage:1,pageSize:10};t&&t.trim()&&(a["query"]=t),i["a"].getAll(a).then((function(t){t&&t.data&&(e.leads=t.data.leads)}))},onSearchDeal:function(t){var e=this,a={currentPage:1,pageSize:10};t&&t.trim()&&(a["query"]=t),u["a"].getAll(a).then((function(t){t&&t.data&&(e.deals=t.data.deals)}))},onSearchAccount:function(t){var e=this,a={currentPage:1,pageSize:10};t&&t.trim()&&(a["query"]=t),d["a"].getAll(a).then((function(t){t&&t.data&&(e.accounts=t.data.accounts)}))},onSearchCampaign:function(t){var e=this,a={currentPage:1,pageSize:10};t&&t.trim()&&(a["query"]=t),p["a"].getAll(a).then((function(t){t&&t.data&&(e.campaigns=t.data.campaigns)}))},mapRRule:function(t){t=g["a"].fromString(t),this.rruleProp.repeatType=t.origOptions.freq,t.origOptions.until?(this.rruleProp.rruleType=3,this.rruleProp.util=Object(f["e"])(new Date(t.origOptions.until).toISOString(),"yyyy-MM-dd")):t.origOptions.count?(this.rruleProp.rruleType=2,this.rruleProp.times=t.origOptions.count):this.rruleProp.rruleType=1},getContactById:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getById(t.contactId).then((function(e){e&&e.data&&(t.call.contact={id:e.data.id,contactName:e.data.name})}));case 2:case"end":return e.stop()}}),e)})))()},getDealById:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getById(t.dealId).then((function(e){e&&e.data&&(t.call.relatedDeal={id:e.data.id,name:e.data.name})}));case 2:case"end":return e.stop()}}),e)})))()}},created:function(){if(this.$route.path.indexOf("call-update")>-1){if(!this.$route.query.id)return void this.$router.push("/");this.call.id=this.$route.query.id,this.loadCall()}else this.$route.query.contactId&&(this.contactId=Number(this.$route.query.contactId),this.getContactById()),this.$route.query.dealId&&(this.dealId=Number(this.$route.query.dealId),this.getDealById());this.loadSelectList(),this.onSearchLead(null),this.onSearchCampaign(null),this.onSearchDeal(null),this.onSearchAccount(null),this.onSearchContact(null),this.onSearch(null)},data:function(){return{call:{owner:null,contact:null,lead:null,purpose:0,status:0,result:0,priority:0,type:0,relatedDeal:null,relatedAccount:null,relatedCampaign:null,title:"string",duration:0,startTime:null,isReminder:!0,rrule:null,description:"string"},duration:{h:1,m:2,s:3},owners:[],purposes:[],types:[],statuses:[],results:[],contacts:[],leads:[],deals:[],accounts:[],campaigns:[],priorities:[],contactId:null,dealId:null,rruleProp:{repeatType:2,rruleType:1,times:1,util:"2021-04-06"},frequencies:g["a"].FREQUENCIES,loading:!1,btnCancel:{btnClass:"btn-white px-3",icon:"fa-times",text:"Cancel"},btnSave:{btnClass:"btn-red px-4",icon:"fa-floppy-o",text:"Save"}}}},_=y,C=(a("a37a"),a("2877")),w=Object(C["a"])(_,n,r,!1,null,"1c273be2",null);e["default"]=w.exports},a37a:function(t,e,a){"use strict";a("fed0")},c8d2:function(t,e,a){var n=a("d039"),r=a("5899"),c="​᠎";t.exports=function(t){return n((function(){return!!r[t]()||c[t]()!=c||r[t].name!==t}))}},dfbf:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("5530"),r=(a("d3b7"),a("99af"),a("a078")),c=a("57c3"),l=a("40d9"),o=a("bb4d"),s={getAll:i,create:u,update:h,getById:p,remove:d,changeAvatar:v,createNote:g,createTag:b,removeNote:y,removeTag:_,loadAllObject:f,loadContacts:m};function i(t){return fetch("".concat(r["d"].apiUrl,"/accounts?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function u(t){return fetch("".concat(r["d"].apiUrl,"/accounts"),c["a"].post(t)).then(l["a"])}function d(t){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(t),c["a"].delete()).then(l["a"])}function p(t){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(t),c["a"].get()).then(l["a"])}function m(t,e){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(e,"/contacts?").concat(Object(r["c"])(t)),c["a"].get()).then(l["a"])}function f(){return fetch("".concat(r["d"].apiUrl,"/accounts/prepare"),c["a"].get()).then(l["a"])}function h(t,e){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(e),c["a"].post(t)).then(l["a"])}function v(t,e){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(e,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},C()),{},{body:t})).then(l["a"])}function g(t,e){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(e,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},C()),{},{body:t})).then(l["a"])}function b(t,e){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(e,"/tags"),c["a"].post(t)).then(l["a"])}function y(t,e){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(t,"/notes/").concat(e),c["a"].delete()).then(l["a"])}function _(t,e){return fetch("".concat(r["d"].apiUrl,"/accounts/").concat(t,"/tags/").concat(e),c["a"].delete()).then(l["a"])}function C(){var t=o["a"].currentUserValue||{},e=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},e)}}},fed0:function(t,e,a){}}]);
//# sourceMappingURL=chunk-9266d454.201a62ff.js.map