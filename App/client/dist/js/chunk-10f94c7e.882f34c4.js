(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10f94c7e"],{"1e64":function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var n=e("5530"),c=(e("d3b7"),e("99af"),e("a078")),o=e("57c3"),r=e("40d9"),s=e("bb4d"),i={getAll:u,create:d,update:v,getById:f,remove:m,changeAvatar:h,createNote:g,createTag:b,removeNote:y,removeTag:C,loadTasks:l,loadAllObject:p};function l(t,a){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(a,"/tasks?").concat(Object(c["c"])(t)),o["a"].get()).then(r["a"])}function u(t){return fetch("".concat(c["d"].apiUrl,"/contacts?").concat(Object(c["c"])(t)),o["a"].get()).then(r["a"])}function d(t){return fetch("".concat(c["d"].apiUrl,"/contacts"),o["a"].post(t)).then(r["a"])}function m(t){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(t),o["a"].delete()).then(r["a"])}function f(t){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(t),o["a"].get()).then(r["a"])}function p(){return fetch("".concat(c["d"].apiUrl,"/contacts/prepare"),o["a"].get()).then(r["a"])}function v(t,a){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(a),o["a"].post(t)).then(r["a"])}function h(t,a){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(a,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},_()),{},{body:t})).then(r["a"])}function g(t,a){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(a,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},_()),{},{body:t})).then(r["a"])}function b(t,a){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(a,"/tags"),o["a"].post(t)).then(r["a"])}function y(t,a){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(t,"/notes/").concat(a),o["a"].delete()).then(r["a"])}function C(t,a){return fetch("".concat(c["d"].apiUrl,"/contacts/").concat(t,"/tags/").concat(a),o["a"].delete()).then(r["a"])}function _(){var t=s["a"].currentUserValue||{},a=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},a)}}},"498a":function(t,a,e){"use strict";var n=e("23e7"),c=e("58a8").trim,o=e("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return c(this)}})},"714d":function(t,a,e){"use strict";e("7ec5")},"7ec5":function(t,a,e){},c8d2:function(t,a,e){var n=e("d039"),c=e("5899"),o="​᠎";t.exports=function(t){return n((function(){return!!c[t]()||o[t]()!=o||c[t].name!==t}))}},dfbf:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var n=e("5530"),c=(e("d3b7"),e("99af"),e("a078")),o=e("57c3"),r=e("40d9"),s=e("bb4d"),i={getAll:l,create:u,update:v,getById:m,remove:d,changeAvatar:h,createNote:g,createTag:b,removeNote:y,removeTag:C,loadAllObject:p,loadContacts:f};function l(t){return fetch("".concat(c["d"].apiUrl,"/accounts?").concat(Object(c["c"])(t)),o["a"].get()).then(r["a"])}function u(t){return fetch("".concat(c["d"].apiUrl,"/accounts"),o["a"].post(t)).then(r["a"])}function d(t){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t),o["a"].delete()).then(r["a"])}function m(t){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t),o["a"].get()).then(r["a"])}function f(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/contacts?").concat(Object(c["c"])(t)),o["a"].get()).then(r["a"])}function p(){return fetch("".concat(c["d"].apiUrl,"/accounts/prepare"),o["a"].get()).then(r["a"])}function v(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a),o["a"].post(t)).then(r["a"])}function h(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/change_avatar"),Object(n["a"])(Object(n["a"])({method:"POST"},_()),{},{body:t})).then(r["a"])}function g(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/notes"),Object(n["a"])(Object(n["a"])({method:"POST"},_()),{},{body:t})).then(r["a"])}function b(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(a,"/tags"),o["a"].post(t)).then(r["a"])}function y(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t,"/notes/").concat(a),o["a"].delete()).then(r["a"])}function C(t,a){return fetch("".concat(c["d"].apiUrl,"/accounts/").concat(t,"/tags/").concat(a),o["a"].delete()).then(r["a"])}function _(){var t=s["a"].currentUserValue||{},a=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(n["a"])({},a)}}},ec8d:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{},[n("div",{staticClass:"px-5 pt-3 m-0 background-main"},[n("div",{staticClass:"row "},[n("div",{staticClass:"col-sm-8"}),n("div",{staticClass:"col-sm-4 d-flex justify-content-end"},[n("router-link",{attrs:{to:{name:"ContactList"}}},[n("VButton",{attrs:{data:t.btnCancel}})],1),n("span",{staticClass:"ml-5",on:{click:function(a){return t.save()}}},[n("VButton",{attrs:{data:t.btnSave}})],1)],1)]),n("div",{staticClass:"mt-3"},[n("VLoading",{attrs:{loading:t.loading}}),n("input",{staticStyle:{display:"none"},attrs:{id:"avatarId",type:"file"},on:{change:function(a){return t.fileChange(a)}}}),n("div",{staticClass:"row mt-3"},[t.contact.id?n("div",{staticClass:"basic-edit"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"user-info-avatar"},[n("div",{staticClass:"user-info-avatar-image"},[t.contact.avatar?n("img",{staticClass:"w-100",attrs:{src:t.contact.avatar,alt:""}}):n("img",{staticClass:"w-100",attrs:{src:e("8ae4"),alt:""}})]),n("div",{staticClass:"image-select-background"}),t._m(1)])])]):t._e(),n("div",{staticClass:"basic-edit"},[t._m(2),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-5"},[n("table",{staticClass:"ml-4"},[n("tbody",[n("tr",[n("td",[t._v("Contact Owner")]),n("td",{staticStyle:{width:"80%"}},[n("vc-select",{attrs:{id:"cOwner",label:"username",filterable:!1,options:t.owners},on:{search:t.onSearch},scopedSlots:t._u([{key:"option",fn:function(a){return[n("div",{staticClass:"d-center"},[t._v(" "+t._s(a.username+" - "+a.firstName)+" ")])]}},{key:"selected-option",fn:function(a){return[n("div",{staticClass:"selected d-center"},[t._v(" "+t._s(a.username+" - "+a.firstName)+" ")])]}}]),model:{value:t.contact.owner,callback:function(a){t.$set(t.contact,"owner",a)},expression:"contact.owner"}},[n("template",{slot:"no-options"},[t._v(" Type for searching... ")])],2)],1)]),n("tr",{class:{"form-group--error":t.$v.contact.name.$error}},[n("td",{staticClass:"required"},[t._v("Name")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.name,expression:"contact.name"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.name},on:{input:function(a){a.target.composing||t.$set(t.contact,"name",a.target.value)}}})])]),n("tr",{class:{"form-group--error":t.$v.contact.email.$error}},[n("td",{staticClass:"required"},[t._v("Email")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.contact.email.$model,expression:"$v.contact.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.$v.contact.email.$model},on:{input:function(a){a.target.composing||t.$set(t.$v.contact.email,"$model",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),t.$v.contact.email.isValidEmail?t._e():n("small",{staticClass:"error text-danger"},[t._v("Email is not correct.")])])]),n("tr",[n("td",[t._v("Phone")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.phone,expression:"contact.phone"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.phone},on:{input:function(a){a.target.composing||t.$set(t.contact,"phone",a.target.value)}}})])]),n("tr",[n("td",[t._v("Mobile")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.mobile,expression:"contact.mobile"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.mobile},on:{input:function(a){a.target.composing||t.$set(t.contact,"mobile",a.target.value)}}})])]),n("tr",[n("td",[t._v("Department Name")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.departmentName,expression:"contact.departmentName"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.departmentName},on:{input:function(a){a.target.composing||t.$set(t.contact,"departmentName",a.target.value)}}})])]),n("tr",[n("td",[t._v("Birthday")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.birthday,expression:"contact.birthday"}],staticClass:"form-control ",attrs:{type:"date"},domProps:{value:t.contact.birthday},on:{input:function(a){a.target.composing||t.$set(t.contact,"birthday",a.target.value)}}})])]),n("tr",[t._m(3),n("td",{staticStyle:{width:"80%"}},[n("vc-select",{attrs:{id:"Collaborator",label:"username",filterable:!1,options:t.owners},on:{search:t.onSearch},scopedSlots:t._u([{key:"option",fn:function(a){return[n("div",{staticClass:"d-center"},[t._v(" "+t._s(a.username+" - "+a.firstName)+" ")])]}},{key:"selected-option",fn:function(a){return[n("div",{staticClass:"selected d-center"},[t._v(" "+t._s(a.username+" - "+a.firstName)+" ")])]}}]),model:{value:t.contact.collaborator,callback:function(a){t.$set(t.contact,"collaborator",a)},expression:"contact.collaborator"}},[n("template",{slot:"no-options"},[t._v(" Type for searching... ")])],2)],1)])])])]),n("div",{staticClass:"col-sm-1"}),n("div",{staticClass:"col-sm-5"},[n("table",[n("tbody",[n("tr",[n("td",[t._v("No Email")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.noEmail,expression:"contact.noEmail"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.contact.noEmail)?t._i(t.contact.noEmail,null)>-1:t.contact.noEmail},on:{change:function(a){var e=t.contact.noEmail,n=a.target,c=!!n.checked;if(Array.isArray(e)){var o=null,r=t._i(e,o);n.checked?r<0&&t.$set(t.contact,"noEmail",e.concat([o])):r>-1&&t.$set(t.contact,"noEmail",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.contact,"noEmail",c)}}})])]),n("tr",[n("td",[t._v("No Call")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.noCall,expression:"contact.noCall"}],staticClass:"form-control ",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.contact.noCall)?t._i(t.contact.noCall,null)>-1:t.contact.noCall},on:{change:function(a){var e=t.contact.noCall,n=a.target,c=!!n.checked;if(Array.isArray(e)){var o=null,r=t._i(e,o);n.checked?r<0&&t.$set(t.contact,"noCall",e.concat([o])):r>-1&&t.$set(t.contact,"noCall",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.contact,"noCall",c)}}})])]),n("tr",[n("td",[t._v("Skype")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.skype,expression:"contact.skype"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.skype},on:{input:function(a){a.target.composing||t.$set(t.contact,"skype",a.target.value)}}})])]),n("tr",[n("td",[t._v("Assistant Name")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.assistantName,expression:"contact.assistantName"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.assistantName},on:{input:function(a){a.target.composing||t.$set(t.contact,"assistantName",a.target.value)}}})])]),n("tr",[n("td",[t._v("Assistant Phone")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.assistantPhone,expression:"contact.assistantPhone"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.assistantPhone},on:{input:function(a){a.target.composing||t.$set(t.contact,"assistantPhone",a.target.value)}}})])]),n("tr",[t._m(4),n("td",[t.priorities?n("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.contact.priority,expression:"contact.priority",modifiers:{trim:!0}}],staticClass:"form-control py-0 w-100",attrs:{id:"Priority"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.contact,"priority",a.target.multiple?e:e[0])}}},t._l(t.priorities,(function(a,e){return n("option",{key:e,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0):t._e()])]),n("tr",[t._m(5),n("td",{staticStyle:{width:"80%"}},[n("vc-select",{attrs:{id:"Account",label:"name",filterable:!1,options:t.accounts},on:{search:t.onSearchAccount},model:{value:t.contact.account,callback:function(a){t.$set(t.contact,"account",a)},expression:"contact.account"}})],1)])])])])])]),n("div",{staticClass:"basic-edit"},[t._m(6),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("table",{staticClass:"ml-4"},[n("tbody",[n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("Country")]),n("td",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.country,expression:"contact.country"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.country},on:{input:function(a){a.target.composing||t.$set(t.contact,"country",a.target.value)}}})])]),n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("City")]),n("td",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.city,expression:"contact.city"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.city},on:{input:function(a){a.target.composing||t.$set(t.contact,"city",a.target.value)}}})])]),n("tr",{staticClass:"row"},[n("td",{staticClass:"col-sm-2"},[t._v("Address Detail")]),n("td",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contact.addressDetail,expression:"contact.addressDetail"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.contact.addressDetail},on:{input:function(a){a.target.composing||t.$set(t.contact,"addressDetail",a.target.value)}}})])])])])])])])])],1)])])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"ml-2"},[e("strong",[t._v("User Avatar")])])},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("label",{attrs:{for:"avatarId"}},[n("img",{staticClass:"image-select",attrs:{src:e("e429"),alt:""}})]),n("img",{staticClass:"image-done",attrs:{src:e("406d"),alt:""}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"ml-2"},[e("strong",[t._v("Contact Information")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",[e("label",{attrs:{for:"Collaborator"}},[t._v("Collaborator")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",[e("label",{attrs:{for:"Priority"}},[t._v("Priority")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("td",[e("label",{attrs:{for:"Account"}},[t._v("Account")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",{staticClass:"ml-2"},[e("strong",[t._v("Address Information")])])}],o=e("1da1"),r=(e("96cf"),e("d3b7"),e("2b3d"),e("3ca3"),e("ddb0"),e("498a"),e("a9e3"),e("a179")),s=e("1e64"),i=e("7082"),l=e("b5ae"),u=e("a078"),d=e("dfbf"),m=e("e118"),f={name:"LeadUpdate",components:{VLoading:m["a"],VButton:r["a"]},validations:{contact:{name:{required:l["required"]},email:{required:l["required"],isValidEmail:function(t){return""===t||this.validateEmail(t)}}}},methods:{save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.$v.$touch(),!t.$v.$invalid){a.next=4;break}return alert("loi"),a.abrupt("return");case 4:if(t.loading=!0,t.contact.owner=t.contact.owner?t.contact.owner.id:null,t.contact.collaborator=t.contact.collaborator?t.contact.collaborator.id:null,t.contact.account=t.contact.account?t.contact.account.id:null,!t.contact.id){a.next=15;break}if(!t.files){a.next=12;break}return a.next=12,t.upload();case 12:s["a"].update(t.contact,t.contact.id).then((function(t){t&&alert(t.message)})).catch((function(t){return alert(t)})).finally((function(){t.loading=!1})),a.next=16;break;case 15:s["a"].create(t.contact).then((function(a){a&&(alert(a.message),t.accountId&&t.$router.push("/account-detail?id="+t.accountId))})).catch((function(t){return alert(t)})).finally((function(){t.loading=!1}));case 16:case"end":return a.stop()}}),a)})))()},loadContact:function(){var t=this;this.loading=!0,s["a"].getById(this.contact.id).then((function(a){a&&a.data?(t.contact=a.data,t.contact.priority=Object(u["f"])(a.data.priorities,"selected","id")):(alert("Không có dữ liệu"),t.$router.push("/"))})).finally((function(){t.loading=!1}))},loadSelectList:function(){var t=this;this.loading=!0,s["a"].loadAllObject().then((function(a){a&&a.data&&"success"===a.status&&(t.priorities=a.data.priority)})).finally((function(){t.loading=!1}))},fileChange:function(t){this.files=t.target.files[0],this.contact.avatar=URL.createObjectURL(this.files)},upload:function(){var t=new FormData;t.append("file",this.files),s["a"].changeAvatar(t,1).then((function(t){console.log(t)})).catch((function(t){return alert(t)}))},onSearch:function(t){var a=this,e={currentPage:1,pageSize:10};t&&(e["query"]=t),i["a"].getAll(e).then((function(t){t&&(a.owners=t.data.users)}))},onSearchAccount:function(t){var a=this,e={currentPage:1,pageSize:10};t&&t.trim()&&(e["query"]=t),d["a"].getAll(e).then((function(t){t&&t.data&&(a.accounts=t.data.accounts)}))},validateEmail:function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)},getAccountById:function(){var t=this;d["a"].getById(this.accountId).then((function(a){a&&a.data&&(t.contact.account=a.data)}))}},created:function(){if(this.$route.path.indexOf("contact-update")>-1){if(!this.$route.query.id)return void this.$router.push("/");this.contact.id=this.$route.query.id,this.loadContact()}else this.$route.query.accountId&&(this.accountId=Number(this.$route.query.accountId),this.getAccountById());this.loadSelectList(),this.onSearch(null),this.onSearchAccount(null)},data:function(){return{contact:{owner:null,account:null,collaborator:null,name:null,email:null,phone:null,mobile:null,departmentName:null,birthday:null,priority:0,noEmail:!0,noCall:!0,skype:null,assistantName:null,assistantPhone:null,country:null,city:null,addressDetail:null},accountId:null,campaignId:null,owners:[],priorities:[],accounts:[],loading:!1,files:null,btnCancel:{btnClass:"btn-white px-3",icon:"fa-times",text:"Cancel"},btnSave:{btnClass:"btn-red px-4",icon:"fa-floppy-o",text:"Save"}}}},p=f,v=(e("714d"),e("2877")),h=Object(v["a"])(p,n,c,!1,null,"9124a278",null);a["default"]=h.exports}}]);
//# sourceMappingURL=chunk-10f94c7e.882f34c4.js.map