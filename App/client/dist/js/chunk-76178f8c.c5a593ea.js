(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76178f8c"],{"01ab":function(e,t,r){},"3abb":function(e,t,r){"use strict";r("01ab")},"85c5":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("div",{staticClass:"px-5 pt-3 m-0 background-main"},[r("VLoading",{attrs:{loading:e.loading}}),r("div",{staticClass:"row "},[r("div",{staticClass:"col-sm-8"}),r("div",{staticClass:"col-sm-4 d-flex justify-content-end"},[r("router-link",{attrs:{to:{name:"TaskList"}}},[r("VButton",{attrs:{data:e.btnCancel}})],1),r("span",{staticClass:"ml-5",on:{click:function(t){return e.save()}}},[r("VButton",{attrs:{data:e.btnSave}})],1)],1)]),r("div",{staticClass:"mt-3"},[r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"basic-edit"},[e._m(0),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-5"},[r("table",{staticClass:"ml-4"},[r("tbody",[r("tr",{class:{"form-group--error":e.$v.meeting.host.$error}},[r("td",{staticClass:"required"},[e._v("Host")]),r("td",{staticStyle:{width:"80%"}},[r("vc-select",{attrs:{id:"cOwner",label:"username",filterable:!1,options:e.users},on:{search:e.onSearch},scopedSlots:e._u([{key:"option",fn:function(t){return[r("div",{staticClass:"d-center"},[e._v(" "+e._s(t.username+" - "+t.firstName)+" ")])]}},{key:"selected-option",fn:function(t){return[r("div",{staticClass:"selected d-center"},[e._v(" "+e._s(t.username+" - "+t.firstName)+" ")])]}}]),model:{value:e.meeting.host,callback:function(t){e.$set(e.meeting,"host",t)},expression:"meeting.host"}},[r("template",{slot:"no-options"},[e._v(" Type for searching... ")])],2)],1)]),r("tr",{class:{"form-group--error":e.$v.meeting.title.$error}},[r("td",{staticClass:"required"},[e._v("Title")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.meeting.title,expression:"meeting.title"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:e.meeting.title},on:{input:function(t){t.target.composing||e.$set(e.meeting,"title",t.target.value)}}})])]),r("tr",[r("td",[e._v("Location")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.meeting.location,expression:"meeting.location"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:e.meeting.location},on:{input:function(t){t.target.composing||e.$set(e.meeting,"location",t.target.value)}}})])]),r("tr",[r("td",[e._v("From")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.meeting.from,expression:"meeting.from"}],staticClass:"form-control ",attrs:{type:"datetime-local"},domProps:{value:e.meeting.from},on:{input:function(t){t.target.composing||e.$set(e.meeting,"from",t.target.value)}}})])]),r("tr",[r("td",[e._v("To")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.meeting.to,expression:"meeting.to"}],staticClass:"form-control ",attrs:{type:"datetime-local"},domProps:{value:e.meeting.to},on:{input:function(t){t.target.composing||e.$set(e.meeting,"to",t.target.value)}}})])]),r("tr",[r("td",[e._v("All day")]),r("td",[r("VSwitchButton",{model:{value:e.meeting.isAllDay,callback:function(t){e.$set(e.meeting,"isAllDay",t)},expression:"meeting.isAllDay"}})],1)]),e.meeting.id?r("tr",[r("td",[e._v("Participants")]),r("td",[r("span",{staticClass:"cursor-pointer",on:{click:e.openModal}},[r("i",{staticClass:"fa fa-plus"}),e._v(" Add ")])])]):e._e(),r("tr",[e._m(1),r("td",[e.priorities?r("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.meeting.priority,expression:"meeting.priority",modifiers:{trim:!0}}],staticClass:"form-control py-0 w-100",attrs:{id:"Priority"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.meeting,"priority",t.target.multiple?r:r[0])}}},e._l(e.priorities,(function(t,i){return r("option",{key:i,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0):e._e()])])])])]),r("div",{staticClass:"col-sm-1"}),r("div",{staticClass:"col-sm-5"},[r("table",[r("tbody",[r("tr",[r("td",[e._v("Remider")]),r("td",[r("VSwitchButton",{model:{value:e.meeting.isRepeat,callback:function(t){e.$set(e.meeting,"isRepeat",t)},expression:"meeting.isRepeat"}})],1)]),e.frequencies?r("tr",[e._m(2),r("td",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.rruleProp.repeatType,expression:"rruleProp.repeatType"}],staticClass:"form-control py-0 w-100",attrs:{id:"Source"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.rruleProp,"repeatType",t.target.multiple?r:r[0])}}},e._l(e.frequencies,(function(t,i){return r("option",{key:i,domProps:{value:i}},[e._v(e._s(t))])})),0)])]):e._e(),r("tr",[r("td",[e._v("End")]),r("td",[r("p",{staticClass:"row"},[r("span",{staticClass:"col-2"},[r("label",{staticClass:"checkbox-custom"},[e._v("Never "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.rruleProp.rruleType,expression:"rruleProp.rruleType"}],attrs:{type:"radio",name:"rrule"},domProps:{value:1,checked:e._q(e.rruleProp.rruleType,1)},on:{change:function(t){return e.$set(e.rruleProp,"rruleType",1)}}}),r("span",{staticClass:"checkmark"})])])]),r("p",{staticClass:"row"},[r("span",{staticClass:"col-2"},[r("label",{staticClass:"checkbox-custom"},[e._v("After "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.rruleProp.rruleType,expression:"rruleProp.rruleType"}],attrs:{type:"radio",name:"rrule"},domProps:{value:2,checked:e._q(e.rruleProp.rruleType,2)},on:{change:function(t){return e.$set(e.rruleProp,"rruleType",2)}}}),r("span",{staticClass:"checkmark"})])]),r("span",{staticClass:"col-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.rruleProp.times,expression:"rruleProp.times"}],staticClass:"col",attrs:{type:"number"},domProps:{value:e.rruleProp.times},on:{input:function(t){t.target.composing||e.$set(e.rruleProp,"times",t.target.value)}}})]),r("span",{staticClass:"col-3"},[e._v("Times")])]),r("p",{staticClass:"row"},[r("span",{staticClass:"col-2"},[r("label",{staticClass:"checkbox-custom"},[e._v("On "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.rruleProp.rruleType,expression:"rruleProp.rruleType"}],attrs:{type:"radio",name:"rrule",checked:""},domProps:{value:3,checked:e._q(e.rruleProp.rruleType,3)},on:{change:function(t){return e.$set(e.rruleProp,"rruleType",3)}}}),r("span",{staticClass:"checkmark"})])]),r("span",{staticClass:"col-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.rruleProp.util,expression:"rruleProp.util"}],attrs:{type:"date"},domProps:{value:e.rruleProp.util},on:{input:function(t){t.target.composing||e.$set(e.rruleProp,"util",t.target.value)}}})])])])])])])])])])]),r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"basic-edit"},[e._m(3),r("div",{staticClass:"row ml-2"},[r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.meeting.description,expression:"meeting.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"",id:"",cols:"25",rows:"5"},domProps:{value:e.meeting.description},on:{input:function(t){t.target.composing||e.$set(e.meeting,"description",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])])])],1),e.meeting.id?r("div",[r("AddParticipantModal",{directives:[{name:"show",rawName:"v-show",value:e.isOpenModal,expression:"isOpenModal"}],ref:"modal",attrs:{"meeting-id":Number(e.meeting.id)},on:{close:e.closeModal}})],1):e._e()])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h4",{staticClass:"ml-2"},[r("strong",[e._v("Meeting Information")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("td",[r("label",{attrs:{for:"Priority"}},[e._v("Priority")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("td",[r("label",{attrs:{for:"Source"}},[e._v("Repeat Type")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h4",{staticClass:"ml-2"},[r("strong",[e._v("Description")])])}],s=r("1da1"),n=(r("96cf"),r("a9e3"),r("d3b7"),r("25f0"),r("a179")),o=r("13fc"),l=r("04dc"),c=r("55b4"),u=r("a078"),m=r("ab65"),d=r("b5ae"),p=r("e118"),v=r("7082"),g={name:"MeetingCreateEdit",components:{VLoading:p["a"],AddParticipantModal:m["a"],VSwitchButton:o["a"],VButton:n["a"]},validations:{meeting:{host:{required:d["required"]},title:{required:d["required"]}}},methods:{save:function(){var e=this;if(this.$v.$touch(),this.$v.$invalid)alert("loi");else{this.loading=!0;var t={freq:Number(this.rruleProp.repeatType),interval:1};2===this.rruleProp.rruleType&&(t["count"]=this.rruleProp.times),3===this.rruleProp.rruleType&&(t["until"]=Object(u["i"])(this.rruleProp.util));var r=new c["a"](t);this.meeting.rrule=r.toString(),this.meeting.host=this.meeting.host?this.meeting.host.id:null,this.meeting.id?l["a"].update(this.meeting,this.meeting.id).then((function(e){e&&alert(e.message)})).catch((function(e){return alert(e)})).finally((function(){e.loading=!1})):l["a"].create(this.meeting).then((function(e){e&&alert(e.message)})).catch((function(e){return alert(e)})).finally((function(){e.loading=!1}))}},loadMeeting:function(){var e=this;this.loading=!0,l["a"].getById(this.meeting.id).then((function(t){t&&t.data?(e.meeting=t.data,e.meeting.isRepeat=t.data.isReminder,e.meeting.from=Object(u["e"])(t.data.fromDate,"yyyy-MM-dd")+"T"+Object(u["e"])(t.data.fromDate,"HH:mm"),e.meeting.to=Object(u["e"])(t.data.toDate,"yyyy-MM-dd")+"T"+Object(u["e"])(t.data.toDate,"HH:mm"),e.meeting.priority=Object(u["f"])(t.data.priorities,"selected","id"),e.mapRRule(e.meeting.rrule)):(alert("Không có dữ liệu"),e.$router.push("/"))})).finally((function(){e.loading=!1}))},loadSelectList:function(){var e=this;this.loading=!0,l["a"].loadAllObject().then((function(t){t&&t.data&&"success"===t.status&&(e.priorities=t.data.priorities)})).finally((function(){e.loading=!1}))},closeModal:function(){this.isOpenModal=!1},openModal:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs["modal"].loadMeeting();case 2:e.$refs["modal"].loadItems(),e.isOpenModal=!0;case 4:case"end":return t.stop()}}),t)})))()},mapRRule:function(e){e=c["a"].fromString(e),this.rruleProp.repeatType=e.origOptions.freq,e.origOptions.until?(this.rruleProp.rruleType=3,this.rruleProp.util=Object(u["e"])(new Date(e.origOptions.until).toISOString(),"yyyy-MM-dd")):e.origOptions.count?(this.rruleProp.rruleType=2,this.rruleProp.times=e.origOptions.count):this.rruleProp.rruleType=1},onSearch:function(e){var t=this,r={currentPage:1,pageSize:10};e&&(r["query"]=e),v["a"].getAll(r).then((function(e){e&&(t.users=e.data.users)}))}},created:function(){if(this.$route.path.indexOf("meeting-update")>-1){if(!this.$route.query.id)return void this.$router.push("/");this.meeting.id=this.$route.query.id,this.loadMeeting()}this.loadSelectList(),this.onSearch(null)},data:function(){return{meeting:{host:null,title:null,location:null,from:(new Date).toISOString().substr(0,16),to:(new Date).toISOString().substr(0,16),isAllDay:null,isRepeat:null,rrule:null,priority:1,description:null},rruleProp:{repeatType:2,rruleType:1,times:1,util:"2021-04-06"},menu:!1,loading:!1,priorities:[],users:[],frequencies:c["a"].FREQUENCIES,isOpenModal:!1,btnCancel:{btnClass:"btn-white px-3",icon:"fa-times",text:"Cancel"},btnSave:{btnClass:"btn-red px-4",icon:"fa-floppy-o",text:"Save"}}}},f=g,h=(r("3abb"),r("2877")),y=Object(h["a"])(f,i,a,!1,null,"2ee01486",null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-76178f8c.c5a593ea.js.map