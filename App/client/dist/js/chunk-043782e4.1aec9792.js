(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-043782e4"],{"269e":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("div",{staticClass:"px-5 pt-3 m-0 background-main"},[r("VLoading",{attrs:{loading:t.loading}}),r("div",{staticClass:"row "},[r("div",{staticClass:"col-sm-8"}),r("div",{staticClass:"col-sm-4 d-flex justify-content-end"},[r("router-link",{attrs:{to:{name:"LeadList"}}},[r("VButton",{attrs:{data:t.btnCancel}})],1),r("span",{staticClass:"ml-5",on:{click:function(e){return t.save()}}},[r("VButton",{attrs:{data:t.btnSave}})],1)],1)]),r("div",{staticClass:"mt-3"},[r("input",{staticStyle:{display:"none"},attrs:{id:"avatarId",type:"file"},on:{change:function(e){return t.fileChange(e)}}}),r("div",{staticClass:"row mt-3"},[t.lead.id?r("div",{staticClass:"basic-edit"},[t._m(0),r("div",{staticClass:"row"},[r("div",{staticClass:"user-info-avatar"},[r("div",{staticClass:"user-info-avatar-image"},[t.lead.avatar?r("img",{staticClass:"w-100",attrs:{src:t.lead.avatar,alt:""}}):r("img",{staticClass:"w-100",attrs:{src:a("8ae4"),alt:""}})]),r("div",{staticClass:"image-select-background"}),t._m(1)])])]):t._e(),r("div",{staticClass:"basic-edit"},[t._m(2),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-5"},[r("table",{staticClass:"ml-4"},[r("tbody",[r("tr",{class:{"form-group--error":t.$v.lead.name.$error}},[r("td",{staticClass:"required"},[t._v("Name")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.lead.name.$model,expression:"$v.lead.name.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.$v.lead.name.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.lead.name,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",{class:{"form-group--error":t.$v.lead.email.$error}},[r("td",{staticClass:"required"},[t._v("Email")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.lead.email.$model,expression:"$v.lead.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.$v.lead.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.lead.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.lead.email.isValidEmail?t._e():r("small",{staticClass:"error text-danger"},[t._v("Email is not correct.")])])]),r("tr",[r("td",[t._v("Phone")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.phone,expression:"lead.phone",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.phone},on:{input:function(e){e.target.composing||t.$set(t.lead,"phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[r("td",[t._v("Fax")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.fax,expression:"lead.fax",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.fax},on:{input:function(e){e.target.composing||t.$set(t.lead,"fax",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[t._m(3),r("td",[t.industry?r("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.industry,expression:"lead.industry",modifiers:{trim:!0}}],staticClass:"form-control py-0 w-100",attrs:{id:"industry"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.lead,"industry",e.target.multiple?a:a[0])}}},t._l(t.industry,(function(e,a){return r("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]),r("tr",[r("td",[t._v("Website")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.website,expression:"lead.website",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.website},on:{input:function(e){e.target.composing||t.$set(t.lead,"website",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[r("td",[t._v("Annual Revenue")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.annualRevenue,expression:"lead.annualRevenue",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.annualRevenue},on:{input:function(e){e.target.composing||t.$set(t.lead,"annualRevenue",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[t._m(4),r("td",[t.priority?r("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.priority,expression:"lead.priority",modifiers:{trim:!0}}],staticClass:"form-control py-0 w-100",attrs:{id:"Priority"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.lead,"priority",e.target.multiple?a:a[0])}}},t._l(t.priority,(function(e,a){return r("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])])])])]),r("div",{staticClass:"col-sm-1"}),r("div",{staticClass:"col-sm-5"},[r("table",[r("tbody",[r("tr",[r("td",[t._v("No Email")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.noEmail,expression:"lead.noEmail",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.lead.noEmail},on:{input:function(e){e.target.composing||t.$set(t.lead,"noEmail",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[r("td",[t._v("No Call")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.noCall,expression:"lead.noCall",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.noCall},on:{input:function(e){e.target.composing||t.$set(t.lead,"noCall",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[t._m(5),r("td",[t.leadSource?r("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.leadSource,expression:"lead.leadSource",modifiers:{trim:!0}}],staticClass:"form-control py-0 w-100",attrs:{id:"Source"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.lead,"leadSource",e.target.multiple?a:a[0])}}},t._l(t.leadSource,(function(e,a){return r("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]),r("tr",[r("td",[t._v("Company Name")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.companyName,expression:"lead.companyName",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.companyName},on:{input:function(e){e.target.composing||t.$set(t.lead,"companyName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[t._m(6),r("td",[t.status?r("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.leadStatus,expression:"lead.leadStatus",modifiers:{trim:!0}}],staticClass:"form-control py-0 w-100",attrs:{id:"Status"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.lead,"leadStatus",e.target.multiple?a:a[0])}}},t._l(t.status,(function(e,a){return r("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0):t._e()])]),r("tr",[r("td",[t._v("Skype")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.skype,expression:"lead.skype",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.skype},on:{input:function(e){e.target.composing||t.$set(t.lead,"skype",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",[t._m(7),r("td",{staticStyle:{width:"80%"}},[r("vc-select",{attrs:{id:"Owner",label:"username",filterable:!1,options:t.owners},on:{search:t.onSearch},scopedSlots:t._u([{key:"option",fn:function(e){return[r("div",{staticClass:"d-center"},[t._v(" "+t._s(e.username+" - "+e.firstName)+" ")])]}},{key:"selected-option",fn:function(e){return[r("div",{staticClass:"selected d-center"},[t._v(" "+t._s(e.username+" - "+e.firstName)+" ")])]}}]),model:{value:t.lead.owner,callback:function(e){t.$set(t.lead,"owner",e)},expression:"lead.owner"}},[r("template",{slot:"no-options"},[t._v(" Type for searching... ")])],2)],1)])])])])])]),r("div",{staticClass:"basic-edit"},[t._m(8),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12"},[r("table",{staticClass:"ml-4"},[r("tbody",[r("tr",{staticClass:"row"},[r("td",{staticClass:"col-sm-2"},[t._v("Country")]),r("td",{staticClass:"col-sm-3"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.country,expression:"lead.country",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.country},on:{input:function(e){e.target.composing||t.$set(t.lead,"country",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",{staticClass:"row"},[r("td",{staticClass:"col-sm-2"},[t._v("City")]),r("td",{staticClass:"col-sm-3"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.city,expression:"lead.city",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.city},on:{input:function(e){e.target.composing||t.$set(t.lead,"city",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("tr",{staticClass:"row"},[r("td",{staticClass:"col-sm-2"},[t._v("Address Detail")]),r("td",{staticClass:"col-sm-9"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.addressDetail,expression:"lead.addressDetail",modifiers:{trim:!0}}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.lead.addressDetail},on:{input:function(e){e.target.composing||t.$set(t.lead,"addressDetail",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])])])])])])]),r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"basic-edit"},[t._m(9),r("div",{staticClass:"row ml-2"},[r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.lead.description,expression:"lead.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"",id:"",cols:"25",rows:"5"},domProps:{value:t.lead.description},on:{input:function(e){e.target.composing||t.$set(t.lead,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])])])],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("User Avatar")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("label",{attrs:{for:"avatarId"}},[r("img",{staticClass:"image-select",attrs:{src:a("e429"),alt:""}})]),r("img",{staticClass:"image-done",attrs:{src:a("406d"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Lead Information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"industry"}},[t._v("Industry")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Priority"}},[t._v("Priority")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Source"}},[t._v("Lead Source")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Status"}},[t._v("Lead Status")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("label",{attrs:{for:"Owner"}},[t._v("Owner")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Address Information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"ml-2"},[a("strong",[t._v("Description")])])}],i=a("1da1"),s=(a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),a("96cf"),a("a179")),l=a("f4b9"),o=a("e118"),d=a("b5ae"),c=a("7082"),u=a("a078"),m={name:"LeadUpdate",components:{VLoading:o["a"],VButton:s["a"]},validations:{lead:{name:{required:d["required"]},email:{required:d["required"],isValidEmail:function(t){return""===t||this.validateEmail(t)}}}},methods:{save:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$v.$touch(),!t.$v.$invalid){e.next=4;break}return alert("loi"),e.abrupt("return");case 4:if(t.lead.id){e.next=8;break}l["a"].create(t.lead).then((function(e){e&&(alert(e.message),t.$router.push("/leads"))})),e.next=13;break;case 8:if(!t.files){e.next=11;break}return e.next=11,t.upload();case 11:t.lead.owner=t.lead.owner?t.lead.owner.id:null,l["a"].update(t.lead,t.lead.id).then((function(t){t&&alert(t.message)}));case 13:case"end":return e.stop()}}),e)})))()},loadLead:function(){var t=this;l["a"].getById(this.lead.id).then((function(e){e&&e.data&&(t.lead=e.data,t.lead.industry=Object(u["f"])(e.data.industry,"selected","id"),t.lead.priority=Object(u["f"])(e.data.priority,"selected","id"),t.lead.leadSource=Object(u["f"])(e.data.leadSource,"selected","id"),t.lead.leadStatus=Object(u["f"])(e.data.status,"selected","id"))}))},fileChange:function(t){this.files=t.target.files[0],this.lead.avatar=URL.createObjectURL(this.files)},upload:function(){var t=new FormData;t.append("file",this.files),l["a"].changeAvatar(t,this.lead.id).then((function(t){console.log(t)})).catch((function(t){return alert(t)}))},loadSelectList:function(){var t=this;this.loading=!0,l["a"].loadAllObject().then((function(e){e&&e.data&&"success"===e.status&&(t.industry=e.data.industry,t.status=e.data.status,t.priority=e.data.priority,t.leadSource=e.data.leadSource)})).finally((function(){t.loading=!1}))},onSearch:function(t){var e=this,a={currentPage:1,pageSize:10};t&&(a["query"]=t),c["a"].getAll(a).then((function(t){t&&(e.owners=t.data.users)}))},validateEmail:function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)}},created:function(){this.$route.query.id&&(this.lead.id=this.$route.query.id,this.loadLead()),this.loadSelectList(),this.onSearch(null)},data:function(){return{lead:{name:null,email:null,phone:null,fax:null,industry:null,website:null,annualRevenue:null,priority:null,noEmail:!0,noCall:!0,leadSource:null,companyName:null,leadStatus:null,skype:null,country:null,city:null,addressDetail:null,description:null,owner:null},loading:!1,files:null,owners:[],industry:[],status:[],priority:[],leadSource:[],btnCancel:{btnClass:"btn-white px-3",icon:"fa-times",text:"Cancel"},btnSave:{btnClass:"btn-red px-4",icon:"fa-floppy-o",text:"Save"}}}},f=m,v=(a("8e83"),a("2877")),p=Object(v["a"])(f,r,n,!1,null,"00745e08",null);e["default"]=p.exports},"605f":function(t,e,a){},"8e83":function(t,e,a){"use strict";a("605f")},f4b9:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var r=a("5530"),n=(a("d3b7"),a("99af"),a("a078")),i=a("57c3"),s=a("40d9"),l=a("bb4d"),o={getAll:d,create:c,update:p,getById:f,remove:u,changeAvatar:g,convertToAccount:m,createNote:y,createTag:h,removeNote:_,removeTag:b,loadAllObject:v};function d(t){return fetch("".concat(n["d"].apiUrl,"/leads?").concat(Object(n["c"])(t)),i["a"].get()).then(s["a"])}function c(t){return fetch("".concat(n["d"].apiUrl,"/leads"),i["a"].post(t)).then(s["a"])}function u(t){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(t),i["a"].delete()).then(s["a"])}function m(t){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(t,"/convert"),i["a"].get()).then(s["a"])}function f(t){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(t),i["a"].get()).then(s["a"])}function v(){return fetch("".concat(n["d"].apiUrl,"/leads/prepare"),i["a"].get()).then(s["a"])}function p(t,e){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(e),i["a"].post(t)).then(s["a"])}function g(t,e){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(e,"/change_avatar"),Object(r["a"])(Object(r["a"])({method:"POST"},C()),{},{body:t})).then(s["a"])}function y(t,e){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(e,"/notes"),Object(r["a"])(Object(r["a"])({method:"POST"},C()),{},{body:t})).then(s["a"])}function h(t,e){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(e,"/tags"),i["a"].post(t)).then(s["a"])}function _(t,e){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(t,"/notes/").concat(e),i["a"].delete()).then(s["a"])}function b(t,e){return fetch("".concat(n["d"].apiUrl,"/leads/").concat(t,"/tags/").concat(e),i["a"].delete()).then(s["a"])}function C(){var t=l["a"].currentUserValue||{},e=t.jwt?{Authorization:t.jwt}:{};return{headers:Object(r["a"])({},e)}}}}]);
//# sourceMappingURL=chunk-043782e4.1aec9792.js.map